<!DOCTYPE html>
<html lang="en">
<head>
  <title>DICTD:构建自己的字典服务器 - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="linux和它的小伙伴" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="../../../../../media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/kdComment.css" type="text/css">
  <script type="text/javascript"
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">暗无天日</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <div class="menu-icon">
      </div>
      <ul class="trigger">
              <li><a href="../../../../../years/">Years</a></li>
              <li><a href="../../../../../authors/">Authors</a></li>
              <li><a href="../../../../../tags/">Tags</a></li>
              <li><a href="../../../../../about/">About</a></li>
              <li><a href="https://github.com/lujun9972/lujun9972.github.com.git">Github</a></li>
              <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
        <input type="text" class="field" name="q" id="s" placeholder="Search">
        <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">DICTD:构建自己的字典服务器</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org3f92e57">安装并配置DICT服务</a>
<ul>
<li><a href="#orgf00b96e">安装DICTD</a></li>
<li><a href="#orga65d328">配置DICTD</a></li>
<li><a href="#orge6af5c2">启动DICTD服务</a></li>
</ul>
</li>
<li><a href="#orgccc83aa">安装并配置DICT客户端</a>
<ul>
<li><a href="#orgf8b71d0">安装dict客户端</a></li>
<li><a href="#org5e16405">配置dict客户端</a></li>
</ul>
</li>
<li><a href="#orgedc676b">使用dict命令查询字典</a></li>
<li><a href="#org8ec88ff">图形化的dict客户端</a></li>
</ul>
</div>
</div>
<p>
Dictd是字典网络协议(Dictonary Network Protocol)的守护进程
</p>

<div id="outline-container-org3f92e57" class="outline-2">
<h2 id="org3f92e57">安装并配置DICT服务</h2>
<div class="outline-text-2" id="text-org3f92e57">
</div>
<div id="outline-container-orgf00b96e" class="outline-3">
<h3 id="orgf00b96e">安装DICTD</h3>
<div class="outline-text-3" id="text-orgf00b96e">
<p>
首先我们在服务器上安装DICT服务，在centos7上有两个相关包: <code>dictd</code> 和 <code>dictd-server</code>, 其中
<code>dictd</code> 包含了DICT服务和客户端,而 <code>dictd-server</code> 只包含了DICT服务端。
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo yum install dictd-server -y
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
docker-ce-stable                                         | 3.5 kB     00:00     
epel                                                     | 4.7 kB     00:00     
extras                                                   | 3.4 kB     00:00     
os                                                       | 3.6 kB     00:00     
updates                                                  | 3.4 kB     00:00     
(2/5): epel/7/x86_64/updat 0% [                 ]  0.0 B/s |    0 B   --:-- ETA (1/5): extras/7/x86_64/primary_db                          | 180 kB   00:00     
(3/5): epel/7/x86_64/updat 6% [=                ]  0.0 B/s | 664 kB   --:-- ETA (2/5): epel/7/x86_64/updateinfo                            | 962 kB   00:01     
(4/5): epel/7/x86_64/prima 25% [====            ] 2.8 MB/s | 2.6 MB   00:02 ETA (3/5): updates/7/x86_64/primary_db                         | 2.4 MB   00:01     
(4/5): docker-ce-stable/x86_64/primary_db                  |  25 kB   00:01     
(5/5): epel/7/x86_64/prima 59% [=========       ] 3.3 MB/s | 6.0 MB   00:01 ETA (5/5): epel/7/x86_64/prima 88% [==============  ] 3.7 MB/s | 9.0 MB   00:00 ETA (5/5): epel/7/x86_64/primary_db                            | 6.6 MB   00:02     
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package dictd-server.x86_64 0:1.12.1-20.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package              Arch           Version                 Repository    Size
================================================================================
Installing:
 dictd-server         x86_64         1.12.1-20.el7           epel         242 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 242 k
Installed size: 826 k
Downloading packages:
dictd-server-1.12.1-20.el7 0% [                 ]  0.0 B/s |    0 B   --:-- ETA dictd-server-1.12.1-20.el7.x86_64.rpm                      | 242 kB   00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : dictd-server-1.12.1-20.el7.x [                             ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [##                           ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [###                          ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [#####                        ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [######                       ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [########                     ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [###########                  ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [#############                ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [##############               ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [################             ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [###################          ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [####################         ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [#####################        ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [######################       ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [########################     ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [#########################    ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [##########################   ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [###########################  ] 1/1  Installing : dictd-server-1.12.1-20.el7.x [############################ ] 1/1  Installing : dictd-server-1.12.1-20.el7.x86_64                            1/1 
  Verifying  : dictd-server-1.12.1-20.el7.x86_64                            1/1 

Installed:
  dictd-server.x86_64 0:1.12.1-20.el7                                           

Complete!
</pre>
</div>

<p>
然后从 <a href="http://www.dict.org/bin/Dict?Form=Dict1&amp;Query=00-database-info&amp;Strategy=*&amp;Database">http://www.dict.org/bin/Dict?Form=Dict1&amp;Query=00-database-info&amp;Strategy=*&amp;Database</a>=* 中下载字典
</p>
</div>
</div>

<div id="outline-container-orga65d328" class="outline-3">
<h3 id="orga65d328">配置DICTD</h3>
<div class="outline-text-3" id="text-orga65d328">
<p>
dictd-server的配置文件位于 <code>/etc/dictd.conf</code> 中。
</p>

<p>
详细的配置可以看 <code>man dictd</code> 的 <code>CONFIGURATION FILE</code> 一节。
</p>

<p>
修改好配置后可以通过给 <code>dictd</code> 发送 <code>SIGHUP</code> 信号来重新读取配置信息
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">kill</span> -s SIGHUP $(<span style="font-weight: bold;">pidof</span> dictd)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6af5c2" class="outline-3">
<h3 id="orge6af5c2">启动DICTD服务</h3>
<div class="outline-text-3" id="text-orge6af5c2">
<div class="org-src-container">
<pre class="src src-shell">sudo systemctl enable dictd.service
sudo systemctl start dictd.service
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgccc83aa" class="outline-2">
<h2 id="orgccc83aa">安装并配置DICT客户端</h2>
<div class="outline-text-2" id="text-orgccc83aa">
</div>
<div id="outline-container-orgf8b71d0" class="outline-3">
<h3 id="orgf8b71d0">安装dict客户端</h3>
<div class="outline-text-3" id="text-orgf8b71d0">
<div class="org-src-container">
<pre class="src src-shell">sudo pacman -S dictd --noconfirm
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e16405" class="outline-3">
<h3 id="org5e16405">配置dict客户端</h3>
<div class="outline-text-3" id="text-org5e16405">
<p>
dict默认从 <code>~/.dcitrc</code> 读取本用户的配置信息，若该文件不存在则从 <code>/etc/dict/dict.conf</code> 读取全局配置。
</p>

<p>
默认的 <code>/etc/dict/dict.conf</code> 配置了两个dict服务地址: <code>localhost</code> 和 <code>dict.org</code>, 我们把它改成自己服务器的地址.
</p>

<p>
创建文件 <code>~/.dictrc</code>,填入下面内容
</p>
<div class="org-src-container">
<pre class="src src-conf">server tencent_cloud { port 2628 }
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgedc676b" class="outline-2">
<h2 id="orgedc676b">使用dict命令查询字典</h2>
<div class="outline-text-2" id="text-orgedc676b">
<p>
最简单的方法就是直接运行 <code>dict 单词</code>,它会列出所有字典中的查询内容
</p>
<div class="org-src-container">
<pre class="src src-shell">dict man
</pre>
</div>

<p>
但是这样一来显示的内容会很多，我们还可以用 <code>-d 字典名</code> 指定从某个字典中查询内容:
</p>
<div class="org-src-container">
<pre class="src src-shell">dict -d gcide man
</pre>
</div>

<p>
只有服务器上支持那些字典可以通过 <code>-D</code> 选项来查询
</p>
<div class="org-src-container">
<pre class="src src-shell">dict -D
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ec88ff" class="outline-2">
<h2 id="org8ec88ff">图形化的dict客户端</h2>
<div class="outline-text-2" id="text-org8ec88ff">
<div class="org-src-container">
<pre class="src src-shell">sudo yum install gnome-dictionary -y
</pre>
</div>
</div>
</div>

</div>
</div>
<div>
  <div class="post-meta">
    <span title="post date" class="post-info">2019-03-01</span>
    <span title="last modification date" class="post-info">2019-04-24</span>
    <span title="tags" class="post-info"><a href="../../../../../tags/linux和它的小伙伴">linux和它的小伙伴</a></span>
    <span title="author" class="post-info">lujun9972</span>
  </div>
  <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
  <script src="../../../../../media/js/md5.min.js"></script>
  <section>
      <div id="gitalk-container"></div>
      <script type="text/javascript">
       var gitalk = new Gitalk({
           clientID: 'fdcb5d9da3f4acb4862c',
           clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
           repo: 'lujun9972.github.com',
           owner: 'lujun9972',
           admin: ['lujun9972'],
           id: md5(location.pathname),      // Ensure uniqueness and length less than 50
           distractionFreeMode: false  // Facebook-like distraction free mode
       })
       gitalk.render('gitalk-container')
      </script>
  </section>
  <script src="../../../../../media/js/kdComment.js"></script>
      <script>
       var _hmt = _hmt || [];
       (function() {
           var hm = document.createElement("script");
           hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
           var s = document.getElementsByTagName("script")[0]; 
           s.parentNode.insertBefore(hm, s);
       })();
      </script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-9488a5c5-3f1f-487d-9f0f-a2bfa120bd0b">lujun9972</a>
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/emacs-china/EGO" target="_blank">EGO</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love</a>
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
    </div>

  </body>
</html>
