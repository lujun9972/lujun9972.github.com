<!DOCTYPE html>
<html lang="en">
<head>
  <title>git练习 - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="linux和它的小伙伴" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="../../../../../media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/org-src-fontify.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/kdComment.css" type="text/css">
  <script type="text/javascript"
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">暗无天日</a></h1>
    <p>=============&gt;DarkSun的个人博客</p>
    <nav class="site-nav">
      <div class="menu-icon">
      </div>
      <ul class="trigger">
              <li><a href="../../../../../years/">Years</a></li>
              <li><a href="../../../../../tags/">Tags</a></li>
              <li><a href="../../../../../about/">About</a></li>
              <li><a href="https://github.com/lujun9972/lujun9972.github.com.git">Github</a></li>
              <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
        <input type="text" class="field" name="q" id="s" placeholder="Search">
        <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">git练习</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org22d5fcd">准备工作</a></li>
<li><a href="#org2783c7c">练习</a></li>
</ul>
</div>
</div>
<p>
从 <a href="https://jvns.ca/blog/2019/08/30/git-exercises--navigate-a-repository/">https://jvns.ca/blog/2019/08/30/git-exercises--navigate-a-repository/</a> 看到的关于git的练习。
</p>

<div id="outline-container-org22d5fcd" class="outline-2">
<h2 id="org22d5fcd">准备工作</h2>
<div class="outline-text-2" id="text-org22d5fcd">
<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/ruby/ruby ~/github/ruby
</pre>
</div>

<p>
本次练习用到的子命令包括
</p>
<ul class="org-ul">
<li>git checkout</li>
<li>git log (--oneline, --author, and -S will be useful)</li>
<li>git diff (--stat will be useful)</li>
<li>git show</li>
<li>git status</li>
</ul>
</div>
</div>

<div id="outline-container-org2783c7c" class="outline-2">
<h2 id="org2783c7c">练习</h2>
<div class="outline-text-2" id="text-org2783c7c">
<p>
<b>对git不太熟悉,不能保证一定是正确的,而且还用到了除了git之外的工具. 如果有发现错误或者更好的实现方法,请不吝赐教,谢谢.</b>
</p>

<ul class="org-ul">
<li><p>
Check out matz’s commit of Ruby from 1998. The commit ID is 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4. Find out how many lines of code Ruby was at that time.
</p>
<div class="org-src-container">
<pre class="src src-shell">git checkout 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4
git branch
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* (&#22836;&#25351;&#38024;&#20998;&#31163;&#20110; 3db12e8b23)</span>
  master
</pre>
</div></li>

<li><p>
Check out the current master branch
</p>
<div class="org-src-container">
<pre class="src src-shell">git checkout master
git branch
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">&#24744;&#30340;&#20998;&#25903;&#19982;&#19978;&#28216;&#20998;&#25903; 'origin/master' &#19968;&#33268;&#12290;
<span class="org-org-level-1">* master</span>
</pre>
</div></li>

<li><p>
Look at the history for the file hash.c. What was the last commit ID that changed that file?
</p>
<div class="org-src-container">
<pre class="src src-shell">git log --oneline -n 1 hash.c
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">21994b7fd6 Avoid rehashing keys in transform_values
</pre>
</div></li>

<li><p>
Get a diff of how hash.c has changed in the last 20ish years: compare that file on the master branch to the file at commit 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4.
</p>
<div class="org-src-container">
<pre class="src src-shell">git diff master 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4 hash.c  |head -n 20
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">diff --git a/hash.c b/hash.c
index e9d994bf70..fe9dfbaa26 100644
--- a/hash.c
<span class="custom">+++</span> b/hash.c
@@ -1,6290 +1,1005 @@
-/**********************************************************************
+/************************************************

   hash.c -

   $Author$
+  $Date$
   created at: Mon Nov 22 18:51:18 JST 1993

-  Copyright (C) 1993-2007 Yukihiro Matsumoto
-  Copyright (C) 2000  Network Applied Communication Laboratory, Inc.
-  Copyright (C) 2000  Information-technology Promotion Agency, Japan
-
-**********************************************************************/
-
</pre>
</div></li>

<li><p>
Find a recent commit that changed hash.c and look at the diff for that commit
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">lastchange</span>=$(<span class="org-sh-quoted-exec">git</span> log --oneline -n 2 hash.c |tail -n 1 |cut -f1 -d <span class="org-string">" "</span>)
git diff master ${<span class="org-variable-name">lastchange</span>} hash.c |head
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">diff --git a/hash.c b/hash.c
index e9d994bf70..b61784af3a 100644
--- a/hash.c
<span class="custom">+++</span> b/hash.c
@@ -3129,16 +3129,10 @@ rb_hash_transform_keys_bang(VALUE hash)
 }

 static int
-transform_values_foreach_func(st_data_t key, st_data_t value, st_data_t argp, int error)
+transform_values_i(VALUE key, VALUE value, VALUE result)
</pre>
</div></li>

<li><p>
This repository has a bunch of tags for every Ruby release. Get a list of all the tags.
</p>
<div class="org-src-container">
<pre class="src src-shell">git tag |head
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">REXML_2_7_0
SHELL_v0_6
forwardable_v1_1
gtk_012
irb_0_7_1
irb_0_7_3
irb_0_9
net_1_1_1
net_1_1_3
oniguruma_2_2_4
</pre>
</div></li>

<li><p>
Find out how many files changed between tag v1_8_6_187 and tag v1_8_6_188
</p>
<div class="org-src-container">
<pre class="src src-shell">git diff v1_8_6_187 v1_8_6_188 --stat
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">ChangeLog                          | 10 <span class="custom">++++++++++</span>
ext/Win32API/lib/win32/registry.rb |  2 +-
ext/Win32API/lib/win32/resolv.rb   |  2 +-
lib/resolv.rb                      |  2 +-
version.h                          |  2 <span class="custom">+-</span>
<span class="custom">5 files changed, 14 insertions(+</span>), 4 deletions(-)
</pre>
</div></li>

<li><p>
Find a commit (any commit) from 2015 and check it out, look at the files very briefly, then go back to the master branch.
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">commit</span>=$(<span class="org-sh-quoted-exec">git</span> log --oneline -n 1 --until 2015-01-01 |cut -f1 -d <span class="org-string">" "</span>)
git checkout <span class="org-string">"${commit}"</span>
git branch
ls |head
git checkout master
git branch
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* (&#22836;&#25351;&#38024;&#20998;&#31163;&#20110; d03c86391b)</span>
  master
addr2line.c
addr2line.h
array.c
benchmark
bignum.c
bin
bootstraptest
BSDL
ccan
ChangeLog
&#24744;&#30340;&#20998;&#25903;&#19982;&#19978;&#28216;&#20998;&#25903; 'origin/master' &#19968;&#33268;&#12290;
<span class="org-org-level-1">* master</span>
</pre>
</div></li>

<li><p>
Find out what commit the tag v1_8_6_187 corresponds to.
</p>
<div class="org-src-container">
<pre class="src src-shell">git rev-list -n 1 v1_8_6_187
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">928e6916b25aee5b2b379999a3fa8816d40db714
</pre>
</div></li>

<li><p>
List the directory .git/refs/tags. Run cat .git/refs/tags/v1_8_6_187 to see the contents of one of those files.
</p>
<div class="org-src-container">
<pre class="src src-shell">ls .git/refs/tags
<span class="org-builtin">echo</span> -------------------------------------------
cat .git/refs/tags/v1_8_6_187
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">-------------------------------------------
</pre>
</div>

<p>
<b>这个题目好奇怪,.git/refs/tags里居然是空的,感觉有什么地方不对</b>
</p></li>

<li><p>
Find out what commit ID HEAD corresponds to right now.
</p>
<div class="org-src-container">
<pre class="src src-shell">git rev-list -n 1 HEAD
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">38069a3a55325757d2bba84191b006361a284cb0
</pre>
</div></li>

<li><p>
Find out how many commits have been made to the test/ directory
</p>
<div class="org-src-container">
<pre class="src src-shell">git log --oneline -- test |wc -l
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">12370
</pre>
</div></li>

<li><p>
Find out what commit ID HEAD corresponds to right now.
</p>
<div class="org-src-container">
<pre class="src src-shell">git rev-list -n 1 HEAD
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">38069a3a55325757d2bba84191b006361a284cb0
</pre>
</div></li>

<li><p>
Get a diff of lib/telnet.rb between the commits 65a5162550f58047974793cdc8067a970b2435c0 and 9e3d9a2a009d2a0281802a84e1c5cc1c887edc71. How many lines of that file were changed?
</p>
<div class="org-src-container">
<pre class="src src-shell">git diff --stat 65a5162550f58047974793cdc8067a970b2435c0  9e3d9a2a009d2a0281802a84e1c5cc1c887edc71 -- lib/telnet.rb
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">lib/telnet.rb | 58 <span class="custom">++++++++++++++++++++++++++++++++++++++++++++</span>--------------
1 file changed, 44 insertions(+), 14 deletions(-)
</pre>
</div></li>

<li><p>
How many commits were made between Ruby 2.5.1 and 2.5.2 (tags v2_5_1 and v2_5_3) (this one is a tiny bit tricky, there’s more than one step)
</p>
<div class="org-src-container">
<pre class="src src-shell">git log --oneline v2_5_1..v2_5_2 |wc -l
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">49
</pre>
</div></li>

<li><p>
How many commits were authored by matz (Ruby’s creator)?
</p>
<div class="org-src-container">
<pre class="src src-shell">git log --oneline --author=matz |wc -l
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">2562
</pre>
</div></li>

<li><p>
What’s the most recent commit that included the word tkutil?
</p>
<div class="org-src-container">
<pre class="src src-shell">git log -n 1 --grep tkutil
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">commit c285a4e3578c30b074f665e5f63283800fe3e157
Author: nobu <a href="mailto:nobu%40b2dd03c8-39d4-4d8f-98ff-823fe69b080e">&lt;nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e&gt;</a>
Date:   Mon May 23 04:31:55 2016 +0000

    remove unnecessary volatiles

    * ext/dbm/dbm.c (fdbm_initialize): used for rb_sys_fail_str.

    * ext/sdbm/init.c (fsdbm_initialize): ditto.

    * ext/tk/tcltklib.c (lib_do_one_event_core): no effect.

    * ext/tk/tkutil/tkutil.c (tk_eval_cmd, tk_get_eval_string): no
      effect if tail call optimized.

    * ext/tk/tkutil/tkutil.c (cbsubst_table_setup): set to const.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@55127 b2dd03c8-39d4-4d8f-98ff-823fe69b080e
</pre>
</div></li>

<li><p>
Check out the commit e51dca2596db9567bd4d698b18b4d300575d3881 and create a new branch that points at that commit.
</p>
<div class="org-src-container">
<pre class="src src-shell">git branch new e51dca2596db9567bd4d698b18b4d300575d3881 
git branch
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* master</span>
  new
</pre>
</div></li>

<li><p>
Run git reflog to see all the navigating of the repository you’ve done so far
</p>
<div class="org-src-container">
<pre class="src src-shell">git reflog
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">5b1fd79ad9 HEAD@{0}: pull: Fast-forward
0e84eecc17 HEAD@{1}: pull: Fast-forward
142efba93e HEAD@{2}: pull: Fast-forward
2272efa463 HEAD@{3}: pull: Fast-forward
c020fd6aa8 HEAD@{4}: pull: Fast-forward
70fd022a2a HEAD@{5}: pull: Fast-forward
38069a3a55 HEAD@{6}: checkout: moving from d03c86391b52e8470fb5b31c58ebc2422ec1653b to master
d03c86391b HEAD@{7}: checkout: moving from master to d03c86391b
38069a3a55 HEAD@{8}: checkout: moving from master to master
38069a3a55 HEAD@{9}: checkout: moving from d03c86391b52e8470fb5b31c58ebc2422ec1653b to master
d03c86391b HEAD@{10}: checkout: moving from master to d03c86391b
38069a3a55 HEAD@{11}: checkout: moving from d03c86391b52e8470fb5b31c58ebc2422ec1653b to master
d03c86391b HEAD@{12}: checkout: moving from master to d03c86391b
38069a3a55 HEAD@{13}: checkout: moving from d03c86391b52e8470fb5b31c58ebc2422ec1653b to master
d03c86391b HEAD@{14}: checkout: moving from master to d03c86391b
38069a3a55 HEAD@{15}: checkout: moving from d03c86391b52e8470fb5b31c58ebc2422ec1653b to master
d03c86391b HEAD@{16}: checkout: moving from master to d03c86391b
38069a3a55 HEAD@{17}: pull: Fast-forward
0785469a40 HEAD@{18}: pull: Fast-forward
3bb1162cac HEAD@{19}: pull: Fast-forward
4a403e3f98 HEAD@{20}: pull: Fast-forward
6cad064424 HEAD@{21}: pull: Fast-forward
1edcfd6107 HEAD@{22}: pull: Fast-forward
8263459627 HEAD@{23}: pull: Fast-forward
f41cd4ba43 HEAD@{24}: pull: Fast-forward
b2c29bbab6 HEAD@{25}: pull: Fast-forward
7e0f56fb3d HEAD@{26}: pull: Fast-forward
ac3e8834e0 HEAD@{27}: checkout: moving from 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4 to master
3db12e8b23 HEAD@{28}: checkout: moving from master to 3db12e8b236ac8f88db8eb4690d10e4a3b8dbcd4
ac3e8834e0 HEAD@{29}: clone: from <span class="org-org-link"><a href="https://github.com/ruby/ruby">https://github.com/ruby/ruby</a></span>
</pre>
</div></li>
</ul>
</div>
</div>

</div>
</div>
<div>
  <div class="post-meta">
    <span title="post date" class="post-info">2019-09-12</span>
    <span title="last modification date" class="post-info">2019-09-25</span>
    <span title="tags" class="post-info"><a href="../../../../../tags/linux和它的小伙伴">linux和它的小伙伴</a></span>
    <span title="author" class="post-info">lujun9972</span>
  </div>
  <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
  <script src="../../../../../media/js/md5.min.js"></script>
  <!-- 添加一叶 -->
  <link href="https://yiyechat.com/open-source/build/content-static/css/main.css" rel="stylesheet">
  <script src="https://yiyechat.com/open-source/build/content-static/js/main.js" ></script>
  <section>
      <div id="gitalk-container"></div>
      <script type="text/javascript">
       var gitalk = new Gitalk({
           clientID: 'fdcb5d9da3f4acb4862c',
           clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
           repo: 'lujun9972.github.com',
           owner: 'lujun9972',
           admin: ['lujun9972'],
           id: md5(location.pathname),      // Ensure uniqueness and length less than 50
           distractionFreeMode: false  // Facebook-like distraction free mode
       })
       gitalk.render('gitalk-container')
      </script>
  </section>
  <script src="../../../../../media/js/kdComment.js"></script>
      <script>
       var _hmt = _hmt || [];
       (function() {
           var hm = document.createElement("script");
           hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
           var s = document.getElementsByTagName("script")[0]; 
           s.parentNode.insertBefore(hm, s);
       })();
      </script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-cf245b62-6b83-4530-a4d8-6c9bca0125b9">lujun9972</a>
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/emacs-china/EGO" target="_blank">EGO</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love</a>
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="https://licensebuttons.net/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
    </div>

  </body>
</html>
