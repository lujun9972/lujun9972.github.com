<!DOCTYPE html>
<html lang="en">
<head>
  <title>Emacs中的日程管理 - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="Emacs之怒" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="../../../../../media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/org-src-fontify.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/kdComment.css" type="text/css">
  <script type="text/javascript"
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">暗无天日</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <div class="menu-icon">
      </div>
      <ul class="trigger">
              <li><a href="../../../../../years/">Years</a></li>
              <li><a href="../../../../../tags/">Tags</a></li>
              <li><a href="../../../../../about/">About</a></li>
              <li><a href="https://github.com/lujun9972/lujun9972.github.com.git">Github</a></li>
              <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
        <input type="text" class="field" name="q" id="s" placeholder="Search">
        <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
    </form>
    <img class="avatar" src="https://avatar.csdnimg.cn/6/2/4/1_lujun9972.jpg" />
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Emacs中的日程管理</h1>


<div id="outline-container-org59ebad7" class="outline-2">
<h2 id="org59ebad7"><span class="section-number-2">1</span> Calendar</h2>
<div class="outline-text-2" id="text-1">
<p>
通过Emacs提供的calendar+Appointment可以实现简单的日程管理功能. 此外Emacs其实还提供了功能更强的Org-mode,但该mode太过复杂,简单的日程管理无需用到这么复杂的东西.
</p>
</div>
<div id="outline-container-org7788022" class="outline-3">
<h3 id="org7788022"><span class="section-number-3">1.1</span> 定位日期</h3>
<div class="outline-text-3" id="text-1-1">
<p>
使用M-x calendar就可以调用Emacs的calendar功能,这时Emacs会打开一个显示了三个月(分别是前一个月,当前月,后一个月)信息的日历,光标自动放在表示今天的那个位置. Emacs提供了大量的命令对光标所在的日期进行日程管理.
默认情况下calendar将周日作为一周的第一天,我们可以通过更改变量calendar-week-start的值来设置以星期几作为一周的第一天
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> calendar-week-start 1)            <span class="org-comment-delimiter">;</span><span class="org-comment">&#35774;&#32622;&#26143;&#26399;&#19968;&#20026;&#27599;&#21608;&#30340;&#31532;&#19968;&#22825;</span>
</pre>
</div>
<p>
一般情况下我们可以直接用上下左右方向键移动光标到其他日期处,也可以直接用鼠标点击要定位的日期. 此外,Emacs也提供了其他的移动命令,如下表所示:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">&#34920;1&nbsp;</span> 移动命令</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-f 或者 左方向键</td>
<td class="org-left">后一日</td>
</tr>

<tr>
<td class="org-left">C-b 或者 右方向键</td>
<td class="org-left">前一日</td>
</tr>

<tr>
<td class="org-left">C-n 或者 下方向键</td>
<td class="org-left">后一周</td>
</tr>

<tr>
<td class="org-left">c-p 或者 上方向键</td>
<td class="org-left">前一周</td>
</tr>

<tr>
<td class="org-left">M-}</td>
<td class="org-left">后一月</td>
</tr>

<tr>
<td class="org-left">M-{</td>
<td class="org-left">前一月</td>
</tr>

<tr>
<td class="org-left">C-x ]</td>
<td class="org-left">后一年</td>
</tr>

<tr>
<td class="org-left">C-x [</td>
<td class="org-left">前一年</td>
</tr>

<tr>
<td class="org-left">C-a</td>
<td class="org-left">移动到一周的开始</td>
</tr>

<tr>
<td class="org-left">C-e</td>
<td class="org-left">移动到一周的末尾</td>
</tr>

<tr>
<td class="org-left">M-a</td>
<td class="org-left">移动到一月的开始</td>
</tr>

<tr>
<td class="org-left">M-e</td>
<td class="org-left">移动到一月的末尾</td>
</tr>

<tr>
<td class="org-left">M-&lt;</td>
<td class="org-left">移动到一年的开始</td>
</tr>

<tr>
<td class="org-left">M-&gt;</td>
<td class="org-left">移动到一年的末尾</td>
</tr>
</tbody>
</table>
<p>
除了使用上诉的移动命令来定位日期外,Emacs还提供了多个命令直接定位到指定的日期处:
</p>
<ul class="org-ul">
<li>使用g d移动到指定的日期
在calendar下按下g d键后,在minibuffer提示我们依次输入年 月 日, Emacs直接将光标定位到输入的日期处.</li>
<li>使用g D移动到某年的指定天数处
在calendar下按下g D键后,在minibuffer提示我们依次输入年 该年的第几天, Emacs将光标定位到指定的日期处. 值得一提的是,输入天数时可以输入负数,如果输入的是负数,则表示还有多少天到年底.</li>
<li>使用. 移动到当前的日期处
在calendar下按下.键后,光标直接跳到代表今天的日期处.</li>
<li>使用g C移动到指定的农历所表示的日期处
在calendar下按下g C键后,Emacs提示你输入农历的信息,Emacs将光标定位到指定的日期处.</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">&#34920;2&nbsp;</span> 定位命令</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">g d</td>
<td class="org-left">根据日期定位</td>
</tr>

<tr>
<td class="org-left">g D</td>
<td class="org-left">根据天数</td>
</tr>

<tr>
<td class="org-left">.</td>
<td class="org-left">移动到当前日期</td>
</tr>

<tr>
<td class="org-left">g C</td>
<td class="org-left">定位到指定的阴历</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org016bd61" class="outline-3">
<h3 id="org016bd61"><span class="section-number-3">1.2</span> 添加代办事项</h3>
<div class="outline-text-3" id="text-1-2">
<p>
在Calendar中可以为指定的日期添加代办事项:
</p>
<ul class="org-ul">
<li>使用i d命令为指定日期添加代办事项
在calendar中输入i d命令后,Emacs会打开一个教diary的文件,并自动填入光标所处的日期信息,我们只需要接着输入代办事项的信息并保存就可以了.</li>
<li>使用i w命令为每周的某一天添加代办事项
我们可以使用i w命令建立每周例行任务</li>
<li>使用i m命令为每月的某一天添加代办事项
我们可以使用i m命令建立每月例行任务</li>
<li>使用i y命令为每年的某一天添加代变事项
我们可以使用i y命令建立每年的例行任务</li>
<li>使用i a建立周年纪念日
跟i y命令类似,但calendar会记录起始年份</li>
<li>使用i b命令为一个时间段添加代办事项
将光标和mark放置在一段时间的起始/结尾处,按下i b键,Calendar自动插入时间段的信息,我们只要输入待办事项的信息就行了</li>
<li>使用i c命令定义一个循环事项
按下i c后,calendar提示输入循环间隔的日期,虽有Calendar自动插入代表循环的时间信息,我们只需要输入代变事项的信息就行了</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">&#34920;3&nbsp;</span> 添加代办事项</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">i d</td>
<td class="org-left">添加待办事项</td>
</tr>

<tr>
<td class="org-left">i w</td>
<td class="org-left">添加每周例行任务</td>
</tr>

<tr>
<td class="org-left">i m</td>
<td class="org-left">添加每月例行任务</td>
</tr>

<tr>
<td class="org-left">i y</td>
<td class="org-left">添加每年例行任务</td>
</tr>

<tr>
<td class="org-left">i a</td>
<td class="org-left">添加周年纪念日</td>
</tr>

<tr>
<td class="org-left">i b</td>
<td class="org-left">为一段时间添加待办事项</td>
</tr>

<tr>
<td class="org-left">i c</td>
<td class="org-left">添加循环事项</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org2d7b463" class="outline-3">
<h3 id="org2d7b463"><span class="section-number-3">1.3</span> 日期信息</h3>
<div class="outline-text-3" id="text-1-3">
<p>
将光标定位到指定的日期处后,Emacs还提供了一些命令来获取光标所处日期的信息. 常用到的命令有:
</p>
<ul class="org-ul">
<li>使用p d命令显示光标所处日期是当年中的第几天</li>
<li>使用p C命令显示光标所处日期的农历信息</li>
<li>M-=计算一段时间的天数
在要计算时间段的起始天数/结束天数用命令C-@定义为mark,然后将光标移动到时间段的结束天数/起始天数,这就定义了一个时间段区域,按下M-=后就会在minibuffer中显示该时间段包含的天数. 其中,该天数包含了起始天数和结束天数的.</li>
<li><p>
使用h命令查看光标所处日期的假期信息
如果光标所处的日期并没有假期,则Emacs在minibuffer提示No Holidays known,否则则显示该日期对应节假日的名字.
Emacs内置了一些常见的节假日信息,另外,Emacs也提供了一些函数供我们自定义节假日:
</p>
<div class="org-src-container">
<pre class="src src-elisp">(holiday-fixed m d &#33410;&#26085;&#21517;) <span class="org-comment-delimiter">;</span><span class="org-comment">&#23450;&#20041;m&#26376;&#30340;&#31532;d&#26085;&#20026;xx&#33410;&#20551;&#26085;</span>
(holiday-float m w n &#33410;&#26085;&#21517;) <span class="org-comment-delimiter">;</span><span class="org-comment">&#23450;&#20041;m&#26376;&#30340;&#31532;w&#20010;&#26143;&#26399;&#30340;&#31532;n&#22825;&#20026;xx&#33410;&#20551;&#26085;,&#40664;&#35748;&#21608;&#26085;&#20026;&#31532;0&#26085;</span>
</pre>
</div></li>
<li>使用a命令查看所有三个月的假期信息
按下a键后,Emacs会在另一个窗口显示calendar中三个月期间内的所有节假日信息.</li>
<li><p>
使用x命令在calendar中标示出所有为节假日的日期来
若我们想让calendar自动标示出节假日的日期来,则更改calendar-mark-holidays-flag的值为非nil即可
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> calendar-mark-holidays-flag t)    <span class="org-comment-delimiter">;</span><span class="org-comment">&#35753;calendar&#33258;&#21160;&#26631;&#35760;&#20986;&#33410;&#20551;&#26085;&#30340;&#26085;&#26399;</span>
</pre>
</div></li>
<li>使用d命令显示光标当前日期的代办事项
可以在d命令前加上一个数字n,表示显示n天内的所有代办事项</li>
<li><p>
使用m命令在calendar中标记出所有记有待办事项的日期
该命令跟x类似,只是它标记出的是带有待办事项的日期. 同样的,你也可以通过更改变量calendar-mark-diary-entries-flag的值为非nil来让calendar自动标记出记有待办事项的日期.
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> calendar-mark-diary-entries-flag t)    <span class="org-comment-delimiter">;</span><span class="org-comment">&#35753;calendar&#33258;&#21160;&#26631;&#35760;&#20986;&#35760;&#26377;&#24453;&#21150;&#20107;&#39033;&#30340;&#26085;&#26399;</span>
</pre>
</div>
<p>
值得一提的时,如果你将记录某项代办事项但却不想被标记出来,只需要在执行插入待办事项的命令前执行C-u就行了(就像C-u i d这样).
</p></li>
<li>使用u命令去除calendar中的标记</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">p d</td>
<td class="org-left">显示当前日期是当年的第几天</td>
</tr>

<tr>
<td class="org-left">p C</td>
<td class="org-left">显示当前日期的农历信息</td>
</tr>

<tr>
<td class="org-left">M-=</td>
<td class="org-left">计算一段时间的天数</td>
</tr>

<tr>
<td class="org-left">h</td>
<td class="org-left">查看当前日期的假期信息</td>
</tr>

<tr>
<td class="org-left">a</td>
<td class="org-left">查看三个月内的所有节假日信息</td>
</tr>

<tr>
<td class="org-left">x</td>
<td class="org-left">标记出calendar中所有为节假日的日期</td>
</tr>

<tr>
<td class="org-left">d</td>
<td class="org-left">查看指定日期的待办事项</td>
</tr>

<tr>
<td class="org-left">m</td>
<td class="org-left">标记出calendar中所有记有待办事项的日期</td>
</tr>

<tr>
<td class="org-left">u</td>
<td class="org-left">清除calendar中的标记</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org5a0f215" class="outline-3">
<h3 id="org5a0f215"><span class="section-number-3">1.4</span> 导出为HTML</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Emacs提供了两个命令来将日历信息,节假日信息和待办事项信息一起导出成HTML文件供我们查看,这两个命令为:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">H m</td>
<td class="org-left">导出单月的日程安排信息</td>
</tr>

<tr>
<td class="org-left">H y</td>
<td class="org-left">导出当年的每个月的日程安排信息</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orge68f8bd" class="outline-2">
<h2 id="orge68f8bd"><span class="section-number-2">2</span> 约会提醒功能</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>用M-x appt-activate开启约会提醒功能
要使用约会提醒功能,先需要开启appointment通知功能,命令是M-x appt-activate</li>
<li>随后使用M-x appt-add命令来添加一个约会提醒.
执行app-add命令后,在Emacs提醒你依次输入约会开始的时间,提醒的消息,和提前多少分钟开始提醒. 虽有在离约会还有指定分钟的时候,Emacs会在底部弹出一个窗口,窗口的内容显示了指定的提醒消息.</li>
<li>使用M-x appt-delete来删除一个约会提醒
执行appt-delete后,Emacs依次显示所有添加的约会提醒,并询问是否删除,按y表示删除,按n表示保留</li>
<li><p>
在mode-line上显示约会提醒的倒计时
通过设置变量appt-display-mode-line的值为非nil,Emacs会在mode-line上显示还有多少分钟到下一个约会的倒计时.
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span class="org-keyword">setq</span> appt-display-mode-line t)         <span class="org-comment-delimiter">;</span><span class="org-comment">&#22312;mode-line&#19978;&#26174;&#31034;&#36824;&#26377;&#22810;&#23569;&#20998;&#38047;&#21040;&#32422;&#20250;&#30340;&#20498;&#35745;&#26102;</span>
</pre>
</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">M-x appt-activate</td>
<td class="org-left">开启appointment提醒功能</td>
</tr>

<tr>
<td class="org-left">M-x appt-add</td>
<td class="org-left">添加一个约会提醒</td>
</tr>

<tr>
<td class="org-left">M-x appt-delete</td>
<td class="org-left">删除约会提醒</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>

</div>
</div>
<div>
  <div class="post-meta">
    <span title="post date" class="post-info">2018-10-27</span>
    <span title="last modification date" class="post-info">2019-04-25</span>
    <span title="tags" class="post-info"><a href="../../../../../tags/emacs之怒">Emacs之怒</a></span>
    <span title="author" class="post-info">lujun9972</span>
  </div>
  <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
  <script src="../../../../../media/js/md5.min.js"></script>
  <section>
      <div id="gitalk-container"></div>
      <script type="text/javascript">
       var gitalk = new Gitalk({
           clientID: 'fdcb5d9da3f4acb4862c',
           clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
           repo: 'lujun9972.github.com',
           owner: 'lujun9972',
           admin: ['lujun9972'],
           id: md5(location.pathname),      // Ensure uniqueness and length less than 50
           distractionFreeMode: false  // Facebook-like distraction free mode
       })
       gitalk.render('gitalk-container')
      </script>
  </section>
  <script src="../../../../../media/js/kdComment.js"></script>
      <script>
       var _hmt = _hmt || [];
       (function() {
           var hm = document.createElement("script");
           hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
           var s = document.getElementsByTagName("script")[0]; 
           s.parentNode.insertBefore(hm, s);
       })();
      </script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; gmail &lt;dot&gt; com">lujun9972</a>
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/emacs-china/EGO" target="_blank">EGO</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love</a>
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="https://licensebuttons.net/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
    </div>

  </body>
</html>
