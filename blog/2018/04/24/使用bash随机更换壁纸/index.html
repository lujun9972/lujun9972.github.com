<!DOCTYPE html>
<html lang="en">
<head>
  <title>使用bash随机更换壁纸 - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="linux和它的小伙伴" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="../../../../../media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/org-src-fontify.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/kdComment.css" type="text/css">
  <script type="text/javascript"
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">暗无天日</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <div class="menu-icon">
      </div>
      <ul class="trigger">
              <li><a href="../../../../../years/">Years</a></li>
              <li><a href="../../../../../tags/">Tags</a></li>
              <li><a href="../../../../../about/">About</a></li>
              <li><a href="https://github.com/lujun9972/lujun9972.github.com.git">Github</a></li>
              <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
        <input type="text" class="field" name="q" id="s" placeholder="Search">
        <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">使用bash随机更换壁纸</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orge2f7790">所需工具</a></li>
<li><a href="#org3b58e8b">壁纸的来源</a></li>
<li><a href="#orgea27eee">实现步骤</a>
<ul>
<li><a href="#org5b545c4">从 https://www.reddit.com/r/wallpapers/ 中抽取出帖子的链接</a></li>
<li><a href="#orgb05791f">随机选择一个链接</a></li>
<li><a href="#org322ba64">找出帖子链接中图片的URL</a></li>
<li><a href="#org406f428">下载并设置壁纸</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
本文要做的事情是写一个脚本，用来随机地从 <code>reddit</code> 的 <code>wallpapers</code> 中挑选一张壁纸应用到卓面上。
</p>

<div id="outline-container-orge2f7790" class="outline-2">
<h2 id="orge2f7790">所需工具</h2>
<div class="outline-text-2" id="text-orge2f7790">
<dl class="org-dl">
<dt>wget</dt><dd>下载URL和壁纸图片</dd>
<dt>grep</dt><dd>从URL中抽取指向壁纸的URL</dd>
<dt>feh</dt><dd>设置壁纸到桌面上</dd>
<dt>shuf</dt><dd>产生随机效果</dd>
</dl>
</div>
</div>

<div id="outline-container-org3b58e8b" class="outline-2">
<h2 id="org3b58e8b">壁纸的来源</h2>
<div class="outline-text-2" id="text-org3b58e8b">
<p>
为了简便处理，我们只从 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 的第一页中随机选取壁纸。
</p>
</div>
</div>

<div id="outline-container-orgea27eee" class="outline-2">
<h2 id="orgea27eee">实现步骤</h2>
<div class="outline-text-2" id="text-orgea27eee">
<p>
用浏览器打开 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 你就会发现它列出了最新产生的25个帖子。
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/04/24/使用bash随机更换壁纸/screenshot-47.png" alt="screenshot-47.png" />
</p>
</div>

<p>
点开帖子就会显示出具体的壁纸内容来
<img src="../../../../../assets/blog/2018/04/24/使用bash随机更换壁纸/screenshot-48.png" alt="screenshot-48.png" />
</p>

<p>
所以我们要做的其实就是下面几步：
</p>
<ol class="org-ol">
<li>从 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 中抽取出帖子的链接</li>
<li>随机选择一个帖子链接</li>
<li>找出帖子链接中图片的URL</li>
<li>下载并设置壁纸</li>
</ol>
</div>

<div id="outline-container-org5b545c4" class="outline-3">
<h3 id="org5b545c4">从 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 中抽取出帖子的链接</h3>
<div class="outline-text-3" id="text-org5b545c4">
<p>
首先让我们用 <code>wget</code> 下载 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 页面来分析一下该如何抽取出帖子的链接呢。
</p>

<div class="org-src-container">
<pre class="src src-shell">wget  https://www.reddit.com/r/wallpapers -O -
</pre>
</div>

<p>
这条命令会下载 <a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a> 页面然后将内容显示在标准输出中。
</p>

<p>
由于内容太多，这里就不列出具体的内容了。我们先把网页中所有的链接过滤出来看看都有哪些内容.
</p>
<div class="org-src-container">
<pre class="src src-shell">wget  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |sort |uniq
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">href="<span class="org-italic">/"</span>
<span class="org-italic">href="</span><span class="org-org-link"><span class="org-italic"><a href="http://redditgifts.com/">http://redditgifts.com/</a></span></span>"
href="<span class="org-org-link"><a href="http://s1.1zoom.me/b5555/619/Ireland_Castles_Trim_castle_Night_Shrubs_538153_2560x1440.jpg">http://s1.1zoom.me/b5555/619/Ireland_Castles_Trim_castle_Night_Shrubs_538153_2560x1440.jpg</a></span>"
href="<span class="org-org-link"><a href="https://about.reddit.com">https://about.reddit.com</a></span>"
href="<span class="org-org-link"><a href="https://about.reddit.com/advertise/">https://about.reddit.com/advertise/</a></span>"
href="<span class="org-org-link"><a href="https://about.reddit.com/careers/">https://about.reddit.com/careers/</a></span>"
href="<span class="org-org-link"><a href="https://about.reddit.com/press/">https://about.reddit.com/press/</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/0eSNAHv.jpg">https://i.imgur.com/0eSNAHv.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/3tPGErY.jpg">https://i.imgur.com/3tPGErY.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/hs7OcfD.jpg">https://i.imgur.com/hs7OcfD.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/pIYPQQZ.jpg">https://i.imgur.com/pIYPQQZ.jpg</a></span>"
href="<span class="org-org-link"><a href="https://imgur.com/a/qLnxOv1">https://imgur.com/a/qLnxOv1</a></span>"
href="<span class="org-org-link"><a href="https://imgur.com/a/zR2iLXL">https://imgur.com/a/zR2iLXL</a></span>"
href="<span class="org-org-link"><a href="https://reddit.com/message/compose?to=/r/wallpapers">https://reddit.com/message/compose?to=/r/wallpapers</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/gold/about">https://www.reddit.com/gold/about</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/help/contentpolicy">https://www.reddit.com/help/contentpolicy</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/help/healthycommunities/">https://www.reddit.com/help/healthycommunities/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/help/privacypolicy">https://www.reddit.com/help/privacypolicy</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/help/useragreement">https://www.reddit.com/help/useragreement</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/login?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F">https://www.reddit.com/login?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/mobile/download">https://www.reddit.com/mobile/download</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F">https://www.reddit.com?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/register?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F">https://www.reddit.com/register?redirect=https%3A%2F%2Fwww.reddit.com%2Fr%2Fwallpapers%2F</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/">https://www.reddit.com/r/wallpapers/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/?after=t3_8e2rq7">https://www.reddit.com/r/wallpapers/?after=t3_8e2rq7</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e2rq7/rush_downtown_thebadbadben_2732x1536/">https://www.reddit.com/r/wallpapers/comments/8e2rq7/rush_downtown_thebadbadben_2732x1536/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e7k5i/ghost_in_the_shell/">https://www.reddit.com/r/wallpapers/comments/8e7k5i/ghost_in_the_shell/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eaglp/tripy_leaf_wallpaper_edited_from_an_unsplash_image/">https://www.reddit.com/r/wallpapers/comments/8eaglp/tripy_leaf_wallpaper_edited_from_an_unsplash_image/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eapkd/beautiful_purple_sunset_1920x180/">https://www.reddit.com/r/wallpapers/comments/8eapkd/beautiful_purple_sunset_1920x180/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebjj0/credit_to_whoever_took_this_picture_i_forget/">https://www.reddit.com/r/wallpapers/comments/8ebjj0/credit_to_whoever_took_this_picture_i_forget/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebyo5/another_whale_seen_in_the_sky_2880x1800/">https://www.reddit.com/r/wallpapers/comments/8ebyo5/another_whale_seen_in_the_sky_2880x1800/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebyvm/snowy_hills_3840_2160/">https://www.reddit.com/r/wallpapers/comments/8ebyvm/snowy_hills_3840_2160/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8edl5j/vaporwave_hills_3840x2160/">https://www.reddit.com/r/wallpapers/comments/8edl5j/vaporwave_hills_3840x2160/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8efq4z/3d_city_glitch_1920x1080/">https://www.reddit.com/r/wallpapers/comments/8efq4z/3d_city_glitch_1920x1080/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eica4/my_cat/">https://www.reddit.com/r/wallpapers/comments/8eica4/my_cat/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eiuhx/imperial_walkers_dawn_darek_zabrocki_3235x1820/">https://www.reddit.com/r/wallpapers/comments/8eiuhx/imperial_walkers_dawn_darek_zabrocki_3235x1820/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ej0ev/kratos_1366x768/">https://www.reddit.com/r/wallpapers/comments/8ej0ev/kratos_1366x768/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ej8np/in_the_woods_the_blue_gloom_m_yakovlev_4373x2460/">https://www.reddit.com/r/wallpapers/comments/8ej8np/in_the_woods_the_blue_gloom_m_yakovlev_4373x2460/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ek3ab/sr71_amidst_the_sunset_3072x1728/">https://www.reddit.com/r/wallpapers/comments/8ek3ab/sr71_amidst_the_sunset_3072x1728/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ekaf2/tokyo_rose_vice_2412x1357/">https://www.reddit.com/r/wallpapers/comments/8ekaf2/tokyo_rose_vice_2412x1357/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ekb2n/another_personal_favorite_cerebrum_by_tomasz/">https://www.reddit.com/r/wallpapers/comments/8ekb2n/another_personal_favorite_cerebrum_by_tomasz/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ekqe8/zettai_ryouiki_outrun_a_sr71_colonel_cbplayer/">https://www.reddit.com/r/wallpapers/comments/8ekqe8/zettai_ryouiki_outrun_a_sr71_colonel_cbplayer/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ekwjg/boardwalk_1920_1080/">https://www.reddit.com/r/wallpapers/comments/8ekwjg/boardwalk_1920_1080/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8elgzr/venom_1688x1076/">https://www.reddit.com/r/wallpapers/comments/8elgzr/venom_1688x1076/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8enilg/lighthouse_2560x1440/">https://www.reddit.com/r/wallpapers/comments/8enilg/lighthouse_2560x1440/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ep7de/trim_castle_ireland_2500_x_1440/">https://www.reddit.com/r/wallpapers/comments/8ep7de/trim_castle_ireland_2500_x_1440/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8epjah/nekopara_vol_0_sfw_1920x1202/">https://www.reddit.com/r/wallpapers/comments/8epjah/nekopara_vol_0_sfw_1920x1202/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8er6uk/apollo_17_earths_moon_2560x1440/">https://www.reddit.com/r/wallpapers/comments/8er6uk/apollo_17_earths_moon_2560x1440/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ess6s/planet_surfaces/">https://www.reddit.com/r/wallpapers/comments/8ess6s/planet_surfaces/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8et1sk/stars_space_galaxy_1920x1080/">https://www.reddit.com/r/wallpapers/comments/8et1sk/stars_space_galaxy_1920x1080/</a></span>"
href="<span class="org-org-link"><a href="https://www.reddithelp.com">https://www.reddithelp.com</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/Commons.a1e39474b980de9725ef.js">https://www.redditstatic.com/desktop2x/Commons.a1e39474b980de9725ef.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/fonts/IBMPlexSans/Medium-c4b185e25a4dde85a29f902cd5ce5360.woff2">https://www.redditstatic.com/desktop2x/fonts/IBMPlexSans/Medium-c4b185e25a4dde85a29f902cd5ce5360.woff2</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/fonts/IBMPlexSans/Regular-116bb6d508f5307861d3b1269bc597e7.woff2">https://www.redditstatic.com/desktop2x/fonts/IBMPlexSans/Regular-116bb6d508f5307861d3b1269bc597e7.woff2</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png">https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-114x114.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-114x114.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-120x120.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-120x120.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-144x144.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-144x144.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-152x152.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-152x152.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-180x180.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-180x180.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-60x60.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-60x60.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-72x72.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-72x72.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-76x76.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-76x76.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-16x16.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-16x16.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-32x32.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-32x32.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-96x96.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-96x96.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/manifest.json">https://www.redditstatic.com/desktop2x/img/favicon/manifest.json</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-2c2efe7e95ba8fc991854e8f01322243.575c42d246b39a3a03e6.js">https://www.redditstatic.com/desktop2x/overlap-2c2efe7e95ba8fc991854e8f01322243.575c42d246b39a3a03e6.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-44e3d536a182a3fe6c9eed5014e47b05.08362281f54b63e55856.js">https://www.redditstatic.com/desktop2x/overlap-44e3d536a182a3fe6c9eed5014e47b05.08362281f54b63e55856.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-617df21ac848fad21f5733296c4f91a1.e7da3e4bc28c59fb8ef1.js">https://www.redditstatic.com/desktop2x/overlap-617df21ac848fad21f5733296c4f91a1.e7da3e4bc28c59fb8ef1.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-9fc0f7a006faf347e6dc6a1670421fb0.6d15f53ff4128ba2c408.js">https://www.redditstatic.com/desktop2x/overlap-9fc0f7a006faf347e6dc6a1670421fb0.6d15f53ff4128ba2c408.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-de8e488af5f659d52a5c321db16a89a5.f1cd898dc044a4d81f48.js">https://www.redditstatic.com/desktop2x/overlap-de8e488af5f659d52a5c321db16a89a5.f1cd898dc044a4d81f48.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/overlap-fc592e99099d1804afeb090c87b920c0.6a46ccff54a4bc09e93c.js">https://www.redditstatic.com/desktop2x/overlap-fc592e99099d1804afeb090c87b920c0.6a46ccff54a4bc09e93c.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/ProductionVendorAux.b93c16e76c66f5775359.js">https://www.redditstatic.com/desktop2x/ProductionVendorAux.b93c16e76c66f5775359.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/ProductionVendor.f98cdff1b7e8856c5548.js">https://www.redditstatic.com/desktop2x/ProductionVendor.f98cdff1b7e8856c5548.js</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/Reddit.3ae165fca313f57c16bb.js">https://www.redditstatic.com/desktop2x/Reddit.3ae165fca313f57c16bb.js</a></span>"
href="<span class="org-org-link"><a href="http://www.redditblog.com/">http://www.redditblog.com/</a></span>"
href="/r/all"
href="<span class="org-italic">/r/popular"</span>
<span class="org-italic">href="</span><span class="org-italic"><span class="org-italic">/r/wallpapers/</span></span>"
href="<span class="org-italic">/r/wallpapers"</span>
<span class="org-italic">href="</span><span class="org-italic"><span class="org-italic">/r/wallpapers/comments/8e2rq7/rush_downtown_thebadbadben_2732x1536/</span></span>"
href="<span class="org-italic">/r/wallpapers/comments/8e7k5i/ghost_in_the_shell/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8eaglp/tripy_leaf_wallpaper_edited_from_an_unsplash_image/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8eapkd/beautiful_purple_sunset_1920x180/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ebjj0/credit_to_whoever_took_this_picture_i_forget/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ebyo5/another_whale_seen_in_the_sky_2880x1800/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ebyvm/snowy_hills_3840_2160/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8edl5j/vaporwave_hills_3840x2160/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8efq4z/3d_city_glitch_1920x1080/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8eica4/my_cat/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8eiuhx/imperial_walkers_dawn_darek_zabrocki_3235x1820/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ej0ev/kratos_1366x768/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ej8np/in_the_woods_the_blue_gloom_m_yakovlev_4373x2460/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ek3ab/sr71_amidst_the_sunset_3072x1728/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ekaf2/tokyo_rose_vice_2412x1357/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ekb2n/another_personal_favorite_cerebrum_by_tomasz/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ekqe8/zettai_ryouiki_outrun_a_sr71_colonel_cbplayer/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ekwjg/boardwalk_1920_1080/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8elgzr/venom_1688x1076/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8enilg/lighthouse_2560x1440/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ep7de/trim_castle_ireland_2500_x_1440/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8epjah/nekopara_vol_0_sfw_1920x1202/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8er6uk/apollo_17_earths_moon_2560x1440/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8ess6s/planet_surfaces/</span>"
href="<span class="org-italic">/r/wallpapers/comments/8et1sk/stars_space_galaxy_1920x1080/</span>"
href="<span class="org-italic">/r/wallpapers/controversial/</span>"
href="<span class="org-italic">/r/wallpapers/hot/</span>"
href="<span class="org-italic">/r/wallpapers/new/</span>"
href="<span class="org-italic">/r/wallpapers/rising/</span>"
href="<span class="org-italic">/r/wallpapers/submit"</span>
<span class="org-italic">href="</span><span class="org-italic"><span class="org-italic">/r/wallpapers/top/</span></span>"
href="/user/acoolrocket"
href="/user/Aileos"
href="/user/Arcade23"
href="/user/BradFMB"
href="/user/campymountain"
href="/user/Clinicalyabrasiv"
href="/user/CreamSodaFloat"
href="/user/Donutsen"
href="/user/douglasrcjames"
href="/user/emem01"
href="/user/hero0fwar"
href="/user/KorvisKhan"
href="/user/MrAwkwardCrotch"
href="/user/nothingsaidalice"
href="/user/pakaau"
href="/user/PiekarnikCiepla"
href="/user/pmaxm00"
href="/user/sequence_string"
href="/user/T3DS"
href="/user/T-D-S"
href="/user/ThatOnePhotog"
href="/user/thmanwithnoname"
href="/user/thmodwithnoname"
href="/user/xypnox"
href="/user/zaron5551"
</pre>
</div>

<p>
你会发现结果中包含了很多乱七八糟的链接。我们还有必要做进一步的过滤。
</p>

<p>
通过分析这些帖子的URL，可以看出它们都是以 <code>https://www.reddit.com/r/wallpapers/comments</code> 开头的。
因此我们试着用 <code>grep</code> 将符合这个条件的URL过滤出来看看效果怎么样
</p>
<div class="org-src-container">
<pre class="src src-shell">wget  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-org"><span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8efq4z/3d_city_glitch_1920x1080/">https://www.reddit.com/r/wallpapers/comments/8efq4z/3d_city_glitch_1920x1080/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e7k5i/ghost_in_the_shell/">https://www.reddit.com/r/wallpapers/comments/8e7k5i/ghost_in_the_shell/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebjj0/credit_to_whoever_took_this_picture_i_forget/">https://www.reddit.com/r/wallpapers/comments/8ebjj0/credit_to_whoever_took_this_picture_i_forget/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebyvm/snowy_hills_3840_2160/">https://www.reddit.com/r/wallpapers/comments/8ebyvm/snowy_hills_3840_2160/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eapkd/beautiful_purple_sunset_1920x180/">https://www.reddit.com/r/wallpapers/comments/8eapkd/beautiful_purple_sunset_1920x180/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8edl5j/vaporwave_hills_3840x2160/">https://www.reddit.com/r/wallpapers/comments/8edl5j/vaporwave_hills_3840x2160/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ebyo5/another_whale_seen_in_the_sky_2880x1800/">https://www.reddit.com/r/wallpapers/comments/8ebyo5/another_whale_seen_in_the_sky_2880x1800/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8eaglp/tripy_leaf_wallpaper_edited_from_an_unsplash_image/">https://www.reddit.com/r/wallpapers/comments/8eaglp/tripy_leaf_wallpaper_edited_from_an_unsplash_image/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e2rq7/rush_downtown_thebadbadben_2732x1536/">https://www.reddit.com/r/wallpapers/comments/8e2rq7/rush_downtown_thebadbadben_2732x1536/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8efhr9/all_our_gods_have_abandoned_us_architectsuk/">https://www.reddit.com/r/wallpapers/comments/8efhr9/all_our_gods_have_abandoned_us_architectsuk/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e3qbh/remember_this_always_loved_this_wallpaper_from/">https://www.reddit.com/r/wallpapers/comments/8e3qbh/remember_this_always_loved_this_wallpaper_from/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e4ni5/long_past_civlization_4000_2349/">https://www.reddit.com/r/wallpapers/comments/8e4ni5/long_past_civlization_4000_2349/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e6281/bus/">https://www.reddit.com/r/wallpapers/comments/8e6281/bus/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e2c57/fluid_mechanics_beeple_3840x2160/">https://www.reddit.com/r/wallpapers/comments/8e2c57/fluid_mechanics_beeple_3840x2160/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e5j95/tulips_at_5_am_1920x1280/">https://www.reddit.com/r/wallpapers/comments/8e5j95/tulips_at_5_am_1920x1280/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e3r13/a_deer_in_the_forest_1920x1080/">https://www.reddit.com/r/wallpapers/comments/8e3r13/a_deer_in_the_forest_1920x1080/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e62jt/froggo/">https://www.reddit.com/r/wallpapers/comments/8e62jt/froggo/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e4xv5/abstract_swirls_2560x1600/">https://www.reddit.com/r/wallpapers/comments/8e4xv5/abstract_swirls_2560x1600/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8dvuro/samurai_spiral_1536_x_864/">https://www.reddit.com/r/wallpapers/comments/8dvuro/samurai_spiral_1536_x_864/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e1j0g/blossom_wallpaper_shot_by_me/">https://www.reddit.com/r/wallpapers/comments/8e1j0g/blossom_wallpaper_shot_by_me/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8dy02y/lagoon_nebula/">https://www.reddit.com/r/wallpapers/comments/8dy02y/lagoon_nebula/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8e4t9z/wallpaper_for_multi_screen_setup/">https://www.reddit.com/r/wallpapers/comments/8e4t9z/wallpaper_for_multi_screen_setup/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8do356/living_tree_4000_2400/">https://www.reddit.com/r/wallpapers/comments/8do356/living_tree_4000_2400/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8dviei/ruined_canvas/">https://www.reddit.com/r/wallpapers/comments/8dviei/ruined_canvas/</a></span>
<span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8dvzwe/infinity_gauntlet_3840x2160/">https://www.reddit.com/r/wallpapers/comments/8dvzwe/infinity_gauntlet_3840x2160/</a></span>
</pre>
</div>

<p>
过滤结果非常好!
</p>
</div>
</div>


<div id="outline-container-orgb05791f" class="outline-3">
<h3 id="orgb05791f">随机选择一个链接</h3>
<div class="outline-text-3" id="text-orgb05791f">
<p>
要随机选择链接，我们可以使用 <code>shuf</code> 命令来打乱链接的顺序，然后选择第一个链接作为我们要访问的链接就行了
</p>
<div class="org-src-container">
<pre class="src src-shell">wget  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-link"><a href="https://www.reddit.com/r/wallpapers/comments/8ej8np/in_the_woods_the_blue_gloom_m_yakovlev_4373x2460/">https://www.reddit.com/r/wallpapers/comments/8ej8np/in_the_woods_the_blue_gloom_m_yakovlev_4373x2460/</a></span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org322ba64" class="outline-3">
<h3 id="org322ba64">找出帖子链接中图片的URL</h3>
<div class="outline-text-3" id="text-org322ba64">
<p>
按照之前的方法，我们来看看帖子链接中都有哪些链接。不过由于我们只需要图片，因此可以加个限制只显示包含 <code>.jpg</code>, <code>.jpeg</code>, 或者 <code>.png</code> 的URL.
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">url</span>=$(<span class="org-sh-quoted-exec">wget</span>  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1)
wget ${<span class="org-variable-name">url</span>} -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -E <span class="org-string">"\.jpg|\.jpeg|\.png"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org">href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-60x60.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-60x60.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-72x72.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-72x72.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-76x76.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-76x76.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-114x114.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-114x114.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-120x120.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-120x120.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-144x144.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-144x144.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-152x152.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-152x152.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-180x180.png">https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-180x180.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png">https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-32x32.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-32x32.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-96x96.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-96x96.png</a></span>"
href="<span class="org-org-link"><a href="https://www.redditstatic.com/desktop2x/img/favicon/favicon-16x16.png">https://www.redditstatic.com/desktop2x/img/favicon/favicon-16x16.png</a></span>"
href="<span class="org-org-link"><a href="https://i.redditmedia.com/Ii0AWUY-N8ibB4bNA0g20PPlNcSc8-nC3kQBlXiT3UA.jpg?s=fb92a5cd0a6d82cb423f87bd3f876b27">https://i.redditmedia.com/Ii0AWUY-N8ibB4bNA0g20PPlNcSc8-nC3kQBlXiT3UA.jpg?s=fb92a5cd0a6d82cb423f87bd3f876b27</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1920&#215;1080.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1920&#215;1080.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1600&#215;900.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1600&#215;900.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1366&#215;768.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1366&#215;768.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;720.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;720.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;800.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;800.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1024&#215;768.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1024&#215;768.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;1024.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-1280&#215;1024.jpg</a></span>"
href="<span class="org-org-link"><a href="https://resi.ze-robot.com/dl/3d/3d-city-glitch-768&#215;1024.jpg">https://resi.ze-robot.com/dl/3d/3d-city-glitch-768&#215;1024.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.redd.it/yt2lweavmqt01.jpg">https://i.redd.it/yt2lweavmqt01.jpg</a></span>"
</pre>
</div>

<p>
其中 <code>redditstatic</code> 中的图片是reddit本身的那些图片，而 <code>resi.ze=robot.com</code> 中的图片是提供下载的不同尺寸的地址，我们过滤掉这两个地址
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">url</span>=$(<span class="org-sh-quoted-exec">wget</span>  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1)
wget ${<span class="org-variable-name">url</span>} -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -E <span class="org-string">"\.jpg|\.jpeg|\.png"</span> |grep -v -E <span class="org-string">"www.redditstatic.com|resi.ze-robot.com"</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-org">href="<span class="org-org-link"><a href="https://i.imgur.com/0eSNAHv.jpg">https://i.imgur.com/0eSNAHv.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/0eSNAHv.jpg">https://i.imgur.com/0eSNAHv.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/0eSNAHv.jpg">https://i.imgur.com/0eSNAHv.jpg</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/nFZpEAo.png">https://i.imgur.com/nFZpEAo.png</a></span>"
href="<span class="org-org-link"><a href="https://i.imgur.com/0eSNAHv.jpg">https://i.imgur.com/0eSNAHv.jpg</a></span>"
</pre>
</div>

<p>
还可能剩下多张图片，我们再用 <code>shuf</code> 来随机选择其中一张
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">url</span>=$(<span class="org-sh-quoted-exec">wget</span>  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1)
wget ${<span class="org-variable-name">url</span>} -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -E <span class="org-string">"\.jpg|\.jpeg|\.png"</span> |grep -v -E <span class="org-string">"www.redditstatic.com|resi.ze-robot.com"</span> |shuf -n 1
</pre>
</div>


<div class="org-src-container">
<pre class="src src-org">href="<span class="org-org-link"><a href="https://i.imgur.com/u7Wm6aB.jpg">https://i.imgur.com/u7Wm6aB.jpg</a></span>"
</pre>
</div>

<p>
我们把URL从 <code>href</code> 中抽取出来
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">url</span>=$(<span class="org-sh-quoted-exec">wget</span>  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1)
wget ${<span class="org-variable-name">url</span>} -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -E <span class="org-string">"\.jpg|\.jpeg|\.png"</span> |grep -v -E <span class="org-string">"www.redditstatic.com|resi.ze-robot.com"</span> |shuf -n 1 |grep -o -E <span class="org-string">'http[^"]+'</span>
</pre>
</div>


<div class="org-src-container">
<pre class="src src-org"><span class="org-org-link"><a href="https://i.redd.it/iihqrt3zmft01.png">https://i.redd.it/iihqrt3zmft01.png</a></span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org406f428" class="outline-3">
<h3 id="org406f428">下载并设置壁纸</h3>
<div class="outline-text-3" id="text-org406f428">
<p>
我们使用wget来下载壁纸，并通过feh来设置壁纸。
</p>

<p>
不过有一点需要注意的是，我们上一步中假设壁纸是以 <code>.jpg</code>, <code>.jpeg</code>, 或者 <code>.png</code> 结尾的。
那如果壁纸不是以这三个后缀结尾怎么办？一个简单的办法就是重新再随机选择一次。
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>

<span class="org-keyword">function</span> <span class="org-function-name">get_image_url</span>()
{
    <span class="org-variable-name">url</span>=$(<span class="org-sh-quoted-exec">wget</span>  https://www.reddit.com/r/wallpapers -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -o -E <span class="org-string">'https://www.reddit.com/r/wallpapers/comments/[^"]+/'</span> |shuf -n 1)
    wget ${<span class="org-variable-name">url</span>} -O - |grep -o -E <span class="org-string">'href="([^"#]+)"'</span> |grep -E <span class="org-string">"\.jpg|\.jpeg|\.png"</span> |grep -v -E <span class="org-string">"www.redditstatic.com|resi.ze-robot.com"</span> |shuf -n 1 |grep -o -E <span class="org-string">'http[^"]+'</span>
}

<span class="org-variable-name">image_url</span>=$(<span class="org-sh-quoted-exec">get_image_url</span>)

<span class="org-keyword">while</span> [[ -z <span class="org-string">"${image_url}"</span> ]];<span class="org-keyword">do</span>
    <span class="org-variable-name">image_url</span>=$(<span class="org-sh-quoted-exec">get_image_url</span>)
<span class="org-keyword">done</span>

wget ${<span class="org-variable-name">image_url</span>} -O - |feh --bg-scale -
</pre>
</div>
</div>
</div>
</div>

</div>
</div>
<div>
  <div class="post-meta">
    <span title="post date" class="post-info">2018-04-24</span>
    <span title="last modification date" class="post-info">2018-04-25</span>
    <span title="tags" class="post-info"><a href="../../../../../tags/linux和它的小伙伴">linux和它的小伙伴</a></span>
    <span title="author" class="post-info">lujun9972</span>
  </div>
  <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
  <script src="../../../../../media/js/md5.min.js"></script>
  <section>
      <div id="gitalk-container"></div>
      <script type="text/javascript">
       var gitalk = new Gitalk({
           clientID: 'fdcb5d9da3f4acb4862c',
           clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
           repo: 'lujun9972.github.com',
           owner: 'lujun9972',
           admin: ['lujun9972'],
           id: md5(location.pathname),      // Ensure uniqueness and length less than 50
           distractionFreeMode: false  // Facebook-like distraction free mode
       })
       gitalk.render('gitalk-container')
      </script>
  </section>
  <script src="../../../../../media/js/kdComment.js"></script>
      <script>
       var _hmt = _hmt || [];
       (function() {
           var hm = document.createElement("script");
           hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
           var s = document.getElementsByTagName("script")[0]; 
           s.parentNode.insertBefore(hm, s);
       })();
      </script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-7220d9c3-803c-4aac-83af-763d9aa824b2">lujun9972</a>
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/emacs-china/EGO" target="_blank">EGO</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love</a>
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="https://licensebuttons.net/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
    </div>

  </body>
</html>
