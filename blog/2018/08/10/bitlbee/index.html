<!DOCTYPE html>
<html lang="en">
<head>
  <title>bitlbee - 暗无天日</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="../" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="../../../../../media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/org-src-fontify.css" type="text/css">
  <link rel="stylesheet" href="../../../../../media/css/kdComment.css" type="text/css">
  <script type="text/javascript"
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">暗无天日</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <div class="menu-icon">
      </div>
      <ul class="trigger">
              <li><a href="../../../../../years/">Years</a></li>
              <li><a href="../../../../../authors/">Authors</a></li>
              <li><a href="../../../../../tags/">Tags</a></li>
              <li><a href="../../../../../about/">About</a></li>
              <li><a href="https://github.com/lujun9972/lujun9972.github.com.git">Github</a></li>
              <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
        <input type="text" class="field" name="q" id="s" placeholder="Search">
        <input type="hidden" name="as_sitesearch" value="lujun9972.github.io">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">bitlbee</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgf5fb4fc">安装bitlbee</a></li>
<li><a href="#orgb06581a">创建 Bitlbee 账户</a>
<ul>
<li><a href="#org80217b1">1. 为当前用户设置密码</a></li>
<li><a href="#org714f515">2. 管理绑定的IM账户</a>
<ul>
<li><a href="#orgc6ed619">查看已经添加了的IM账号</a></li>
<li><a href="#org8672c9d">删除IM账号</a></li>
<li><a href="#orga76eadd">安装slack支持</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf2876eb">使用Bitlbee进行聊天</a></li>
</ul>
</div>
</div>
<p>
The program that makes IM possible within IRC is an IM-to-IRC gateway called Bitlbee (www.bitlbee.org). Basically, Bitlbee sets up an IRC server on your local machine that you can connect to like any other IRC server you might already use. Once you connect to the server, you can join the #bitlbee channel and authenticate with the bot inside. Then, you can configure Bitlbee with your Jabber, MSN, Yahoo or Oscar (AIM/ICQ) accounts. Once you are set up, when your friends are on-line, they join the channel, and when you talk to them or private-message them inside the IRC channel, it translates it to an instant message. 
</p>

<div id="outline-container-orgf5fb4fc" class="outline-2">
<h2 id="orgf5fb4fc">安装bitlbee</h2>
<div class="outline-text-2" id="text-orgf5fb4fc">
<p>
bitlbee在常见linux发行版中都有被纳入包仓库中，因此安装起来很简单。在archlinux上可以直接使用pacman来安装
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo pacman -S bitlbee --noconfirm
</pre>
</div>
<p>
但是这个版本的 <code>bitlbee</code> 不支持 <code>libpurple</code> 所能支持的IM协议不对，推荐使用 <code>aur/bitlbee-libpurple-unicode-channel</code> 代替
</p>
<div class="org-src-container">
<pre class="src src-shell">aurman -S bitlbee-libpurple-unicode-channel --noconfirm
</pre>
</div>
<p>
安装好后，你会发现多出来了一个 <code>bitlbee.service</code>,我们启动它
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo systemctl start bitlbee.service
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb06581a" class="outline-2">
<h2 id="orgb06581a">创建 Bitlbee 账户</h2>
<div class="outline-text-2" id="text-orgb06581a">
<p>
启动bitlbee后，它会在本地启动一个IRC server。使用IRC客户端登陆 <code>localhost:6667</code>, 后会自动 <code>/join &amp;bitlbee</code> 频道。
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-01.png" alt="bitlbee-01.png" />
</p>
</div>

<p>
在这里你会看到有一个名叫 <code>root</code> 的机器人，我们可以输入 <code>help</code> 或者 <code>help 命令</code> 来查看帮助信息。
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-02.png" alt="bitlbee-02.png" />
</p>
</div>

<p>
我们可以根据 <code>help quickstart</code> 的说明来设置好Bitlbee用户，并绑定即时消息帐号
</p>
</div>

<div id="outline-container-org80217b1" class="outline-3">
<h3 id="org80217b1">1. 为当前用户设置密码</h3>
<div class="outline-text-3" id="text-org80217b1">

<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-03.png" alt="bitlbee-03.png" />
</p>
</div>

<p>
由于Bitlbee将会保存你的即使信息帐号,密码,联系人等敏感信息，因此你需要为自己的Bitlbee用户设置一个好的密码来保障安全。
</p>

<p>
设置密码的方法是输入 <code>register 密码</code>
</p>

<p>
设置密码后，下一次再登陆Bitlbee的本地IRC，就可以用 <code>identify 密码</code> 来认证身份了。
认证身份后，Bitlbee会自动帮你登陆所有绑定的即时消息服务。
</p>
</div>
</div>

<div id="outline-container-org714f515" class="outline-3">
<h3 id="org714f515">2. 管理绑定的IM账户</h3>
<div class="outline-text-3" id="text-org714f515">

<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-04.png" alt="bitlbee-04.png" />
</p>
</div>

<p>
我们可以用 <code>account</code> 命令来添加/删除绑定的IM账户.
</p>

<p>
添加IM账户的语法为 <code>account add IM协议 IM用户名 IM密码 [IM服务器]</code>
</p>

<p>
默认 Bitlbee 支持的IM协议有Hipchat、Identica Jabber、MSN、Oscar(ICQ/AOL)、twitter.
但是通过插件，你可以扩展 Bitlbee 支持的协议。 要查看当前 Bitlbee 支持那些协议可以运行 <code>plugins</code>
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-05.png" alt="bitlbee-05.png" />
</p>
</div>

<p>
若安装的是启用了 <code>libpurple</code> 的Bitlbee，则还可以输入 <code>help purple</code> 来查看其他支持的IM协议
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-06.png" alt="bitlbee-06.png" />
</p>
</div>

<p>
由于ICQ和AOL都使用的Oscar协议，因此需要通过最后面的 <code>IM服务器</code> 来区分。
AOL服务器为 <code>login.oscar.aol.com</code>, ICQ服务器为 <code>slogin.icq.com</code>
</p>

<p>
添加完所有的IM账号后，输入 <code>acount on</code>, Bitlbee就会登陆所有绑定的账号了。
</p>

<p>
Bitlbee登陆IM账号后会自动下载联系人信息，将在线的联系人加入到IRC的channel中来。
</p>
</div>

<div id="outline-container-orgc6ed619" class="outline-4">
<h4 id="orgc6ed619">查看已经添加了的IM账号</h4>
<div class="outline-text-4" id="text-orgc6ed619">
<p>
可以输入 <code>account list</code> 来查看已经添加了哪些IM账号
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-08.png" alt="bitlbee-08.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org8672c9d" class="outline-4">
<h4 id="org8672c9d">删除IM账号</h4>
<div class="outline-text-4" id="text-org8672c9d">
<p>
若不想再通过 Bitlbee 登陆某个IM账号，可以使用 <code>account IM账号 del</code> 来删除之
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-09.png" alt="bitlbee-09.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orga76eadd" class="outline-4">
<h4 id="orga76eadd">安装slack支持</h4>
<div class="outline-text-4" id="text-orga76eadd">
<p>
注意：要安装slack支持，必须使用启用了 <code>libpurple</code> 的Bitlbee。
</p>

<ol class="org-ol">
<li><p>
安装 <code>libpurple</code>
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo pacman -S libpurple --noconfirm
</pre>
</div></li>

<li><p>
从github上下载并编译 <code>slack-libpurple</code>
</p>
<div class="org-src-container">
<pre class="src src-shell">git clone https://github.com/dylex/slack-libpurple.git
<span class="org-builtin">cd</span> slack-libpurple
sudo make install
</pre>
</div>

<p>
编译完后，你会发现在 <code>/usr/lib/purple-2/</code> 目录下多了一个 <code>libslack.so</code>
</p></li>

<li><p>
重启Bitlbee
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo systemctl restart bitlbee.service
</pre>
</div></li>

<li><p>
再次使用 <code>help purple</code> 查看支持的协议会发现已经支持slack了
</p>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-07.png" alt="bitlbee-07.png" />
</p>
</div></li>

<li><p>
使用 <code>account add slack username@networkname.slack.com</code> 来添加slack账号
</p>
<pre class="example">
account add slack lujun9972@emacs-cn.slack.com
</pre></li>

<li>登陆 <code>https://api.slack.com/custom-integrations/legacy-tokens</code> 生成API tokens</li>

<li><p>
设置 API tokens
</p>
<pre class="example">
account slack set api_token xxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxx
account slack on
</pre>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-11.png" alt="bitlbee-11.png" />
</p>
</div></li>

<li><p>
加入要聊天的channel
</p>

<p>
比如我要加入 <code>emacs-general</code> channel，那么我可以输入
</p>
<pre class="example">
chat add slack emacs-general
/join #emacs-general
</pre>


<div class="figure">
<p><img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-12.png" alt="bitlbee-12.png" />
</p>
</div></li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf2876eb" class="outline-2">
<h2 id="orgf2876eb">使用Bitlbee进行聊天</h2>
<div class="outline-text-2" id="text-orgf2876eb">
<p>
使用Bitlbee进行聊天的方法跟使用IRC一样，只需要按照 <code>昵称:消息</code> 的格式来会话即可，Bitlbee会弹出一个独立的聊天窗口
</p>

<p>
或者也可以使用 <code>/msg 昵称</code> 开启私密聊天.
</p>

<p>
下面是我自己跟自己聊天的截图
<img src="../../../../../assets/blog/2018/08/10/bitlbee/bitlbee-10.png" alt="bitlbee-10.png" />
</p>
</div>
</div>

</div>
</div>
<div>
  <div class="post-meta">
    <span title="post date" class="post-info">2018-08-10</span>
    <span title="last modification date" class="post-info">2018-08-10</span>
    <span title="tags" class="post-info"><a href="../../../../../tags/..-">../</a></span>
    <span title="author" class="post-info">lujun9972</span>
  </div>
  <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
  <script src="../../../../../media/js/md5.min.js"></script>
  <section>
      <div id="gitalk-container"></div>
      <script type="text/javascript">
       var gitalk = new Gitalk({
           clientID: 'fdcb5d9da3f4acb4862c',
           clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
           repo: 'lujun9972.github.com',
           owner: 'lujun9972',
           admin: ['lujun9972'],
           id: md5(location.pathname),      // Ensure uniqueness and length less than 50
           distractionFreeMode: false  // Facebook-like distraction free mode
       })
       gitalk.render('gitalk-container')
      </script>
  </section>
  <script src="../../../../../media/js/kdComment.js"></script>
      <script>
       var _hmt = _hmt || [];
       (function() {
           var hm = document.createElement("script");
           hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
           var s = document.getElementsByTagName("script")[0]; 
           s.parentNode.insertBefore(hm, s);
       })();
      </script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-6e3c4d23-dfb8-48cd-a161-2710667a639d">lujun9972</a>
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/emacs-china/EGO" target="_blank">EGO</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love</a>
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
    </div>

  </body>
</html>
