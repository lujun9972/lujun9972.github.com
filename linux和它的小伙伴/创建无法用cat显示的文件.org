#+TITLE: åˆ›å»ºæ— æ³•ç”¨catæ˜¾ç¤ºçš„æ–‡ä»¶
#+AUTHOR: lujun9972
#+TAGS: linuxå’Œå®ƒçš„å°ä¼™ä¼´
#+DATE: [2018-04-07 å…­ 12:04]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:nil

* clearæ¸…å±çš„åŸç†

=clear= å‘½ä»¤å®é™…ä¸Šæ˜¯è¾“å‡ºçš„æ˜¯ä¸‹é¢è¿™æ ·ä¸€ä¸ªå­—ç¬¦åºåˆ—
#+BEGIN_SRC org
[3J[H[J
#+END_SRC

é€šè¿‡ä¸‹é¢å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºè¿™ç‚¹ã€‚
#+BEGIN_EXAMPLE
  [lujun9972@T520 ~]$ clear |od -x
  0000000 5b1b 4a33 5b1b 1b48 325b 004a
  0000013
#+END_EXAMPLE

äº‹å®ä¸Šï¼Œå…·ä½“è¾“å‡ºå“ªä¸ªå­—ç¬¦ä¸²åºåˆ—æ˜¯clearå‘½ä»¤æ ¹æ®ç»ˆç«¯çš„ç±»å‹åœ¨terminfoæ•°æ®åº“ä¸­æ‰¾å‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸åŒç»ˆç«¯è¾“å‡ºçš„åºåˆ—æ˜¯ä¸ä¸€æ ·çš„ã€‚

ä½†æœ‰ä¸€ç‚¹æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯å½“åœ¨ç»ˆç«¯è¾“å‡ºè¿™ä¹ˆä¸€ä¸²å­—ç¬¦åºåˆ—æ—¶ï¼Œç»ˆç«¯å®é™…ä¸Šåšçš„æ˜¯åˆ·æ–°å±å¹•çš„åŠ¨ä½œï¼Œè€Œå…·ä½“è¿™ä¸ªå­—ç¬¦ä¸²åºåˆ—æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥è¾“å‡ºåˆ™æ— å…³ç´§è¦ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªå­—ç¬¦åºåˆ—å­˜åœ¨å˜é‡ä¸­,ç„¶åechoè¿™ä¸ªå˜é‡ï¼Œ
#+BEGIN_SRC shell
  cls=$(clear)
  echo $cls
#+END_SRC

ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªå­—ç¬¦ä¸²åºåˆ—å­˜å…¥æ–‡ä»¶ä¸­ï¼Œç„¶åcatè¿™ä¸ªæ–‡ä»¶ï¼Œ
#+BEGIN_SRC shell
  clear>/tmp/cls.txt
  cat /tmp/cls.txt
#+END_SRC

éƒ½èƒ½äº§ç”Ÿåˆ·æ–°çš„æ•ˆæœã€‚

* resetçš„æ¸…å±åŸç†
resetçš„åŸç†è·Ÿclearç±»ä¼¼ï¼Œæ‰€ä¸åŒä¹‹å¤„åœ¨äºresetæ˜¯å°†å­—ç¬¦ä¸²åºåˆ—è¾“å‡ºåˆ°stderrä¸­ï¼Œè€Œä¸”è¾“å‡ºçš„å­—ç¬¦ä¸²åºåˆ—è·Ÿclearè¾“å‡ºçš„ä¹Ÿä¸ä¸€æ ·ã€‚

æ‰€ä»¥ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªå­—ç¬¦åºåˆ—å­˜åœ¨å˜é‡ä¸­,ç„¶åechoè¿™ä¸ªå˜é‡ï¼Œ
#+BEGIN_SRC shell
  reset=$(reset 2>&1)
  echo $reset
#+END_SRC

æˆ–è€…æŠŠè¿™ä¸ªå­—ç¬¦ä¸²åºåˆ—å­˜å…¥æ–‡ä»¶ä¸­ï¼Œç„¶åcatè¿™ä¸ªæ–‡ä»¶ï¼Œ
#+BEGIN_SRC shell
  reset 2>/tmp/reset.txt
  cat /tmp/reset.txt
#+END_SRC

æ¥äº§ç”Ÿæ¸…é™¤å±å¹•çš„æ•ˆæœ.

* è®©æ–‡ä»¶æ— æ³•ç”¨catæ˜¾ç¤º
å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ =/tmp/1.txt=

#+BEGIN_SRC shell
  FILE="/tmp/1.txt"
  >$FILE
  for n in $(seq 1 10);do
      echo "line$n" >>$FILE
  done
#+END_SRC


å®ƒçš„å†…å®¹æ˜¯:
#+BEGIN_SRC shell :results org
  cat /tmp/1.txt
#+END_SRC

#+BEGIN_SRC org
line1
line2
line3
line4
line5
line6
line7
line8
line9
line10
#+END_SRC

æˆ‘ä»¬åœ¨æ¯è¡Œåé¢åŠ ä¸Šåˆ·å±åºåˆ—(æˆ–è€…æ¸…å±åºåˆ—)
#+BEGIN_SRC shell
  sed -i 's/$/'"$(clear)"'/' /tmp/1.txt 
#+END_SRC

#+RESULTS:

è¿™æ ·å½“ä½ ç”¨head/tail/catä¹‹ç±»çš„å‘½ä»¤æ¥æ˜¾ç¤ºæ–‡ä»¶æ—¶ä¼šå‘ç°å±å¹•è¢«åˆ·æ–°äº†ï¼Œæ²¡æœ‰æ–°çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚
(å¦‚æœä½ åŠ çš„æ˜¯æ¸…å±åºåˆ—çš„è¯ï¼Œä¼šå‘ç°ä¹‹å‰çš„å†…å®¹éƒ½è¢«æ¸…é™¤æ‰äº†)

ä½ å¯ä»¥æŠŠå®ƒå°è£…æˆä¸€ä¸ªå‡½æ•°
#+BEGIN_SRC shell
  function hide()
  {
      local file
      for file in "$@";do
          sed -i 's/$/'"$(clear)"'/' $file
      done
  }
#+END_SRC

å¦‚æœè¦æ˜¾ç¤ºçš„è¯ï¼Œä¹Ÿå¾ˆå®¹æ˜“ï¼Œç›´æ¥ç”¨sedæŠŠæ¯è¡Œæœ€åçš„11ä¸ªå­—ç¬¦åˆ æ‰å°±è¡Œäº†
#+BEGIN_SRC shell
  sed 's/.\{10\}$//' /tmp/1.txt
#+END_SRC

#+RESULTS:
| line1  |
| line2  |
| line3  |
| line4  |
| line5  |
| line6  |
| line7  |
| line8  |
| line9  |
| line10 |

ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå°è£…æˆä¸€ä¸ªå‡½æ•°
#+BEGIN_SRC shell
  function show()
  {
      local file
      for file in "$@";do
          sed 's/.\{10\}$//' $file
      done
  }

  function unhide()
  {
      local file
      for file in "$@";do
          sed -i 's/.\{10\}$//' $file
      done
  }
#+END_SRC


ä¸è¿‡å¦‚æœä½ ç”¨viæ‰“å¼€çš„è¯ï¼Œè¿˜æ˜¯èƒ½çœ‹åˆ°é‡Œé¢çš„å†…å®¹çš„.
[[file:./images/screenshot-34.png]]
