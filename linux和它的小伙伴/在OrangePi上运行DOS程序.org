#+TITLE: åœ¨OrangePiä¸Šè¿è¡ŒDOSç¨‹åº
#+AUTHOR: lujun9972
#+TAGS: linuxå’Œå®ƒçš„å°ä¼™ä¼´
#+DATE: [2018-03-30 äº” 21:40]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t \n:nil ::t |:t ^:nil -:nil f:t *:t <:nil
#+PROPERTY: header-args:shell :dir /ssh:lujun9972@orangepipc2: :results org

ä» https://opensource.com/article/18/3/can-you-run-dos-raspberry-pi è¿™é‡Œå­¦åˆ°çš„ã€‚

é€šè¿‡QEMUå¯ä»¥åœ¨OrangePiä¸Šåˆ›å»ºä¸€ä¸ªè½»é‡çš„è™šæ‹Ÿæœºï¼Œå¹¶é€šè¿‡åœ¨å…¶ä¸Šé¢å®‰è£…[[http://www.freedos.org/][FreeDOS]]æ¥è¾¾åˆ°æ”¯æŒè¿è¡ŒDOSç¨‹åºçš„ç›®çš„ã€‚

* ä¸‹è½½FreeDOSå®‰è£…æ–‡ä»¶

FreeDOSæ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹çš„ä¸MS-DOSå…¼å®¹çš„æ“ä½œç³»ç»Ÿï¼Œä½ å¯ä»¥é€šè¿‡å®ƒæ¥è¿è¡ŒDOSæ¸¸æˆå’Œé‚£äº›è€æ—§çš„DOSè½¯ä»¶ã€‚

FreeDOSæä¾›CD-ROMé•œåƒä¸‹è½½ï¼šä½ å¯ä»¥ä»[[http://www.freedos.org/download/][è¿™é‡Œ]]ä¸‹è½½FreeDOSï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸º1.2ç‰ˆ
#+BEGIN_SRC shell
  wget http://www.freedos.org/download/download/FD12CD.iso
#+END_SRC

* å®‰è£…QEMU
#+BEGIN_SRC shell
  sudo apt install qemu -y
#+END_SRC

#+RESULTS:
#+BEGIN_SRC org
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... 66%Building dependency tree... 90%Building dependency tree       
Reading state information... 0%Reading state information... 0%Reading state information... Done
The following packages were automatically installed and are no longer required:
  libpython-dev libpython2.7-dev python-m2crypto python-pkg-resources
  python2.7-dev
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  acl ipxe-qemu libaio1 libboost-random1.58.0 libboost-thread1.58.0
  libbrlapi0.6 libcacard0 libfdt1 libiscsi2 libnspr4 libnss3 libnss3-nssdb
  librados2 librbd1 libusbredirparser1 qemu-block-extra qemu-slof qemu-system
  qemu-system-arm qemu-system-common qemu-system-mips qemu-system-misc
  qemu-system-ppc qemu-system-sparc qemu-system-x86 qemu-user qemu-utils
  seabios
Suggested packages:
  qemu-user-static samba vde2 openbios-ppc openhackware sgabios ovmf
  debootstrap
Recommended packages:
  cpu-checker qemu-user-binfmt sharutils
The following NEW packages will be installed:
  acl ipxe-qemu libaio1 libboost-random1.58.0 libboost-thread1.58.0
  libbrlapi0.6 libcacard0 libfdt1 libiscsi2 libnspr4 libnss3 libnss3-nssdb
  librados2 librbd1 libusbredirparser1 qemu qemu-block-extra qemu-slof
  qemu-system qemu-system-arm qemu-system-common qemu-system-mips
  qemu-system-misc qemu-system-ppc qemu-system-sparc qemu-system-x86 qemu-user
  qemu-utils seabios
0 upgraded, 29 newly installed, 0 to remove and 0 not upgraded.
Need to get 25.6 MB of archives.
After this operation, 185 MB of additional disk space will be used.
[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m            Get:1 http://ports.ubuntu.com xenial/main arm64 libiscsi2 arm64 1.12.0-2 [43.3 kB]
[33m0% [1 libiscsi2 14.1 kB/43.3 kB 33%][0m[33m                                    1% [Working][0m            Get:2 http://ports.ubuntu.com xenial-updates/main arm64 libboost-random1.58.0 arm64 1.58.0+dfsg-5ubuntu3.1 [11.3 kB]
[33m1% [2 libboost-random1.58.0 11.3 kB/11.3 kB 100%]           8,991 B/s 47min 17s[0m[33m2% [Working]                                                8,991 B/s 47min 17s[0m                                                                               Get:3 http://ports.ubuntu.com xenial-updates/main arm64 libboost-thread1.58.0 arm64 1.58.0+dfsg-5ubuntu3.1 [42.9 kB]
[33m2% [3 libboost-thread1.58.0 10.1 kB/42.9 kB 24%]            8,991 B/s 47min 16s[0m[33m2% [Working]                                                8,991 B/s 47min 12s[0m                                                                               Get:4 http://ports.ubuntu.com xenial-security/main arm64 libnspr4 arm64 2:4.13.1-0ubuntu0.16.04.1 [91.3 kB]
[33m2% [4 libnspr4 1,239 B/91.3 kB 1%]                          8,991 B/s 47min 12s[0m[33m3% [Working]                                                 8,991 B/s 47min 2s[0m                                                                               Get:5 http://ports.ubuntu.com xenial-security/main arm64 libnss3-nssdb all 2:3.28.4-0ubuntu0.16.04.3 [10.6 kB]
[33m3% [5 libnss3-nssdb 6,522 B/10.6 kB 61%]                     8,991 B/s 47min 1s[0m[33m4% [Working]                                                 8,991 B/s 47min 1s[0m                                                                               Get:6 http://ports.ubuntu.com xenial-security/main arm64 libnss3 arm64 2:3.28.4-0ubuntu0.16.04.3 [944 kB]
[33m4% [6 libnss3 8,192 B/944 kB 1%]                             8,991 B/s 47min 0s[0m[33m6% [6 libnss3 498 kB/944 kB 53%]                             8,991 B/s 46min 6s[0m[33m8% [Working]                                                8,991 B/s 45min 16s[0m                                                                               Get:7 http://ports.ubuntu.com xenial-updates/main arm64 librados2 arm64 10.2.9-0ubuntu0.16.04.1 [1,440 kB]
[33m8% [7 librados2 0 B/1,440 kB 0%]                            8,991 B/s 45min 16s[0m[33m9% [7 librados2 503 kB/1,440 kB 35%]                        8,991 B/s 44min 20s[0m[33m13% [Working]                                               8,991 B/s 42min 36s[0m                                                                               Get:8 http://ports.ubuntu.com xenial-updates/main arm64 librbd1 arm64 10.2.9-0ubuntu0.16.04.1 [1,893 kB]
[33m13% [8 librbd1 36.4 kB/1,893 kB 2%]                         8,991 B/s 42min 32s[0m[33m16% [8 librbd1 1,030 kB/1,893 kB 54%]                       8,991 B/s 40min 41s[0m[33m20% [Working]                                                8,991 B/s 39min 5s[0m                                                                               Get:9 http://ports.ubuntu.com xenial-security/main arm64 qemu-block-extra arm64 1:2.5+dfsg-5ubuntu10.24 [29.9 kB]
[33m20% [9 qemu-block-extra 29.9 kB/29.9 kB 100%]                8,991 B/s 39min 2s[0m[33m20% [Working]                                                8,991 B/s 39min 2s[0m                                                                               Get:10 http://ports.ubuntu.com xenial/main arm64 acl arm64 2.2.52-3 [35.8 kB]
[33m20% [10 acl 0 B/35.8 kB 0%]                                  8,991 B/s 39min 2s[0m[33m21% [Working]                                               8,991 B/s 38min 58s[0m                                                                               Get:11 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-common arm64 1:2.5+dfsg-5ubuntu10.24 [279 kB]
[33m21% [11 qemu-system-common 43.5 kB/279 kB 16%]              8,991 B/s 38min 53s[0m[33m23% [Working]                                               8,991 B/s 38min 27s[0m                                                                               Get:12 http://ports.ubuntu.com xenial-updates/main arm64 ipxe-qemu all 1.0.0+git-20150424.a25a16d-1ubuntu1.2 [717 kB]
[33m23% [12 ipxe-qemu 26.3 kB/717 kB 4%]                        8,991 B/s 38min 24s[0m[33m26% [Working]                                                8,991 B/s 37min 7s[0m                                                                               Get:13 http://ports.ubuntu.com xenial/main arm64 libaio1 arm64 0.3.110-2 [6,204 B]
[33m26% [13 libaio1 6,204 B/6,204 B 100%]                        8,991 B/s 37min 7s[0m[33m26% [Working]                                                8,991 B/s 37min 7s[0m                                                                               Get:14 http://ports.ubuntu.com xenial/main arm64 libcacard0 arm64 1:2.5.0-2 [16.8 kB]
[33m26% [14 libcacard0 4,096 B/16.8 kB 24%]                      8,991 B/s 37min 6s[0m[33m27% [Working]                                                8,991 B/s 37min 5s[0m                                                                               Get:15 http://ports.ubuntu.com xenial/main arm64 libusbredirparser1 arm64 0.7.1-1 [12.0 kB]
[33m27% [15 libusbredirparser1 6,417 B/12.0 kB 53%]              8,991 B/s 37min 4s[0m[33m28% [Working]                                                8,991 B/s 37min 3s[0m                                                                               Get:16 http://ports.ubuntu.com xenial-updates/main arm64 libbrlapi0.6 arm64 5.3.1-2ubuntu2.1 [18.5 kB]
[33m28% [16 libbrlapi0.6 12.3 kB/18.5 kB 66%]                    8,991 B/s 37min 2s[0m[33m29% [Working]                                                8,991 B/s 37min 1s[0m                                                                               Get:17 http://ports.ubuntu.com xenial/main arm64 libfdt1 arm64 1.4.0+dfsg-2 [12.7 kB]
[33m29% [17 libfdt1 12.7 kB/12.7 kB 100%]                        8,991 B/s 37min 0s[0m[33m29% [Working]                                                8,991 B/s 37min 0s[0m                                                                               Get:18 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-arm arm64 1:2.5+dfsg-5ubuntu10.24 [2,028 kB]
[33m29% [18 qemu-system-arm 28.0 kB/2,028 kB 1%]                8,991 B/s 36min 57s[0m[33m34% [18 qemu-system-arm 1,594 kB/2,028 kB 79%]               8,991 B/s 34min 3s[0m[33m36% [Working]                                               8,991 B/s 33min 14s[0m                                                                               Get:19 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-mips arm64 1:2.5+dfsg-5ubuntu10.24 [2,351 kB]
[33m36% [19 qemu-system-mips 4,096 B/2,351 kB 0%]               8,991 B/s 33min 14s[0m[33m40% [19 qemu-system-mips 1,109 kB/2,351 kB 47%]             8,991 B/s 31min 11s[0m[33m42% [19 qemu-system-mips 1,685 kB/2,351 kB 72%]              8,991 B/s 30min 7s[0m[33m44% [Working]                                               8,991 B/s 28min 53s[0m                                                                               Get:20 http://ports.ubuntu.com xenial-updates/main arm64 qemu-slof all 20151103+dfsg-1ubuntu1.1 [173 kB]
[33m44% [20 qemu-slof 39.1 kB/173 kB 23%]                       8,991 B/s 28min 48s[0m[33m46% [Working]                                               8,991 B/s 28min 34s[0m                                                                               Get:21 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-ppc arm64 1:2.5+dfsg-5ubuntu10.24 [2,455 kB]
[33m46% [21 qemu-system-ppc 24.6 kB/2,455 kB 1%]                8,991 B/s 28min 31s[0m[33m47% [21 qemu-system-ppc 515 kB/2,455 kB 21%]                8,991 B/s 27min 36s[0m[33m51% [21 qemu-system-ppc 1,724 kB/2,455 kB 70%]              8,991 B/s 25min 22s[0m[33m54% [Working]                                                     1,987 kB/s 6s[0m                                                                               Get:22 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-sparc arm64 1:2.5+dfsg-5ubuntu10.24 [1,533 kB]
[33m54% [22 qemu-system-sparc 6,769 B/1,533 kB 0%]                    1,987 kB/s 6s[0m[33m54% [22 qemu-system-sparc 119 kB/1,533 kB 8%]                     1,987 kB/s 6s[0m[33m57% [22 qemu-system-sparc 1,032 kB/1,533 kB 67%]                  1,987 kB/s 6s[0m[33m59% [Working]                                                     1,987 kB/s 5s[0m                                                                               Get:23 http://ports.ubuntu.com xenial/main arm64 seabios all 1.8.2-1ubuntu1 [113 kB]
[33m59% [23 seabios 5,733 B/113 kB 5%]                                1,987 kB/s 5s[0m[33m60% [Working]                                                     1,987 kB/s 5s[0m                                                                               Get:24 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-x86 arm64 1:2.5+dfsg-5ubuntu10.24 [1,767 kB]
[33m61% [24 qemu-system-x86 12.4 kB/1,767 kB 1%]                      1,987 kB/s 5s[0m[33m62% [24 qemu-system-x86 528 kB/1,767 kB 30%]                      1,987 kB/s 5s[0m[33m63% [24 qemu-system-x86 693 kB/1,767 kB 39%]                      1,987 kB/s 5s[0m[33m65% [24 qemu-system-x86 1,327 kB/1,767 kB 75%]                    1,987 kB/s 5s[0m[33m66% [24 qemu-system-x86 1,712 kB/1,767 kB 97%]                    1,987 kB/s 4s[0m[33m67% [Working]                                                     1,987 kB/s 4s[0m                                                                               Get:25 http://ports.ubuntu.com xenial-security/main arm64 qemu-system-misc arm64 1:2.5+dfsg-5ubuntu10.24 [4,544 kB]
[33m67% [25 qemu-system-misc 9,112 B/4,544 kB 0%]                     1,987 kB/s 4s[0m[33m68% [25 qemu-system-misc 399 kB/4,544 kB 9%]                      1,987 kB/s 4s[0m[33m69% [25 qemu-system-misc 741 kB/4,544 kB 16%]                     1,987 kB/s 4s[0m[33m70% [25 qemu-system-misc 1,170 kB/4,544 kB 26%]                   1,987 kB/s 4s[0m[33m71% [25 qemu-system-misc 1,521 kB/4,544 kB 33%]                   1,987 kB/s 4s[0m[33m72% [25 qemu-system-misc 1,629 kB/4,544 kB 36%]                   1,987 kB/s 3s[0m[33m74% [25 qemu-system-misc 2,237 kB/4,544 kB 49%]                     873 kB/s 8s[0m[33m75% [25 qemu-system-misc 2,603 kB/4,544 kB 57%]                     873 kB/s 7s[0m[33m76% [25 qemu-system-misc 2,932 kB/4,544 kB 65%]                     873 kB/s 7s[0m[33m77% [25 qemu-system-misc 3,265 kB/4,544 kB 72%]                     873 kB/s 7s[0m[33m78% [25 qemu-system-misc 3,671 kB/4,544 kB 81%]                     873 kB/s 6s[0m[33m79% [25 qemu-system-misc 4,031 kB/4,544 kB 89%]                     873 kB/s 6s[0m[33m81% [25 qemu-system-misc 4,434 kB/4,544 kB 98%]                     873 kB/s 5s[0m[33m82% [Working]                                                       873 kB/s 5s[0m                                                                               Get:26 http://ports.ubuntu.com xenial-security/main arm64 qemu-system arm64 1:2.5+dfsg-5ubuntu10.24 [6,120 B]
[33m82% [26 qemu-system 1,816 B/6,120 B 30%]                            873 kB/s 5s[0m[33m82% [Working]                                                       873 kB/s 5s[0m                                                                               Get:27 http://ports.ubuntu.com xenial-security/universe arm64 qemu-user arm64 1:2.5+dfsg-5ubuntu10.24 [4,446 kB]
[33m82% [27 qemu-user 4,081 B/4,446 kB 0%]                              873 kB/s 5s[0m[33m83% [27 qemu-user 370 kB/4,446 kB 8%]                               873 kB/s 5s[0m[33m85% [27 qemu-user 749 kB/4,446 kB 17%]                              873 kB/s 4s[0m[33m86% [27 qemu-user 1,150 kB/4,446 kB 26%]                            873 kB/s 4s[0m[33m87% [27 qemu-user 1,526 kB/4,446 kB 34%]                            873 kB/s 3s[0m[33m88% [27 qemu-user 1,886 kB/4,446 kB 42%]                            873 kB/s 3s[0m[33m89% [27 qemu-user 2,167 kB/4,446 kB 49%]                            725 kB/s 3s[0m[33m90% [27 qemu-user 2,402 kB/4,446 kB 54%]                            725 kB/s 3s[0m[33m91% [27 qemu-user 2,754 kB/4,446 kB 62%]                            725 kB/s 3s[0m[33m92% [27 qemu-user 2,982 kB/4,446 kB 67%]                            725 kB/s 2s[0m[33m92% [27 qemu-user 3,156 kB/4,446 kB 71%]                            725 kB/s 2s[0m[33m93% [27 qemu-user 3,362 kB/4,446 kB 76%]                            725 kB/s 2s[0m[33m93% [27 qemu-user 3,574 kB/4,446 kB 80%]                            725 kB/s 1s[0m[33m94% [27 qemu-user 3,777 kB/4,446 kB 85%]                            725 kB/s 1s[0m[33m95% [27 qemu-user 3,935 kB/4,446 kB 89%]                            725 kB/s 1s[0m[33m95% [27 qemu-user 4,140 kB/4,446 kB 93%]                            725 kB/s 1s[0m[33m96% [27 qemu-user 4,330 kB/4,446 kB 97%]                            725 kB/s 0s[0m[33m97% [Working]                                                       725 kB/s 0s[0m                                                                               Get:28 http://ports.ubuntu.com xenial-security/main arm64 qemu-utils arm64 1:2.5+dfsg-5ubuntu10.24 [464 kB]
[33m97% [28 qemu-utils 6,434 B/464 kB 1%]                               725 kB/s 0s[0m[33m97% [28 qemu-utils 185 kB/464 kB 40%]                               725 kB/s 0s[0m[33m98% [28 qemu-utils 355 kB/464 kB 77%]                               419 kB/s 0s[0m[33m99% [Working]                                                       419 kB/s 0s[0m                                                                               Get:29 http://ports.ubuntu.com xenial-security/universe arm64 qemu arm64 1:2.5+dfsg-5ubuntu10.24 [83.0 kB]
[33m99% [29 qemu 4,526 B/83.0 kB 5%]                                    419 kB/s 0s[0m[33m100% [Working]                                                      419 kB/s 0s[0m                                                                               Fetched 25.6 MB in 31s (801 kB/s)
Selecting previously unselected package libiscsi2:arm64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 45845 files and directories currently installed.)
Preparing to unpack .../libiscsi2_1.12.0-2_arm64.deb ...
Unpacking libiscsi2:arm64 (1.12.0-2) ...
Selecting previously unselected package libboost-random1.58.0:arm64.
Preparing to unpack .../libboost-random1.58.0_1.58.0+dfsg-5ubuntu3.1_arm64.deb ...
Unpacking libboost-random1.58.0:arm64 (1.58.0+dfsg-5ubuntu3.1) ...
Selecting previously unselected package libboost-thread1.58.0:arm64.
Preparing to unpack .../libboost-thread1.58.0_1.58.0+dfsg-5ubuntu3.1_arm64.deb ...
Unpacking libboost-thread1.58.0:arm64 (1.58.0+dfsg-5ubuntu3.1) ...
Selecting previously unselected package libnspr4:arm64.
Preparing to unpack .../libnspr4_2%3a4.13.1-0ubuntu0.16.04.1_arm64.deb ...
Unpacking libnspr4:arm64 (2:4.13.1-0ubuntu0.16.04.1) ...
Selecting previously unselected package libnss3-nssdb.
Preparing to unpack .../libnss3-nssdb_2%3a3.28.4-0ubuntu0.16.04.3_all.deb ...
Unpacking libnss3-nssdb (2:3.28.4-0ubuntu0.16.04.3) ...
Selecting previously unselected package libnss3:arm64.
Preparing to unpack .../libnss3_2%3a3.28.4-0ubuntu0.16.04.3_arm64.deb ...
Unpacking libnss3:arm64 (2:3.28.4-0ubuntu0.16.04.3) ...
Selecting previously unselected package librados2.
Preparing to unpack .../librados2_10.2.9-0ubuntu0.16.04.1_arm64.deb ...
Unpacking librados2 (10.2.9-0ubuntu0.16.04.1) ...
Selecting previously unselected package librbd1.
Preparing to unpack .../librbd1_10.2.9-0ubuntu0.16.04.1_arm64.deb ...
Unpacking librbd1 (10.2.9-0ubuntu0.16.04.1) ...
Selecting previously unselected package qemu-block-extra:arm64.
Preparing to unpack .../qemu-block-extra_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-block-extra:arm64 (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package acl.
Preparing to unpack .../acl_2.2.52-3_arm64.deb ...
Unpacking acl (2.2.52-3) ...
Selecting previously unselected package qemu-system-common.
Preparing to unpack .../qemu-system-common_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-common (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package ipxe-qemu.
Preparing to unpack .../ipxe-qemu_1.0.0+git-20150424.a25a16d-1ubuntu1.2_all.deb ...
Unpacking ipxe-qemu (1.0.0+git-20150424.a25a16d-1ubuntu1.2) ...
Selecting previously unselected package libaio1:arm64.
Preparing to unpack .../libaio1_0.3.110-2_arm64.deb ...
Unpacking libaio1:arm64 (0.3.110-2) ...
Selecting previously unselected package libcacard0:arm64.
Preparing to unpack .../libcacard0_1%3a2.5.0-2_arm64.deb ...
Unpacking libcacard0:arm64 (1:2.5.0-2) ...
Selecting previously unselected package libusbredirparser1:arm64.
Preparing to unpack .../libusbredirparser1_0.7.1-1_arm64.deb ...
Unpacking libusbredirparser1:arm64 (0.7.1-1) ...
Selecting previously unselected package libbrlapi0.6:arm64.
Preparing to unpack .../libbrlapi0.6_5.3.1-2ubuntu2.1_arm64.deb ...
Unpacking libbrlapi0.6:arm64 (5.3.1-2ubuntu2.1) ...
Selecting previously unselected package libfdt1:arm64.
Preparing to unpack .../libfdt1_1.4.0+dfsg-2_arm64.deb ...
Unpacking libfdt1:arm64 (1.4.0+dfsg-2) ...
Selecting previously unselected package qemu-system-arm.
Preparing to unpack .../qemu-system-arm_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-arm (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-system-mips.
Preparing to unpack .../qemu-system-mips_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-mips (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-slof.
Preparing to unpack .../qemu-slof_20151103+dfsg-1ubuntu1.1_all.deb ...
Unpacking qemu-slof (20151103+dfsg-1ubuntu1.1) ...
Selecting previously unselected package qemu-system-ppc.
Preparing to unpack .../qemu-system-ppc_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-ppc (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-system-sparc.
Preparing to unpack .../qemu-system-sparc_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-sparc (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package seabios.
Preparing to unpack .../seabios_1.8.2-1ubuntu1_all.deb ...
Unpacking seabios (1.8.2-1ubuntu1) ...
Selecting previously unselected package qemu-system-x86.
Preparing to unpack .../qemu-system-x86_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-x86 (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-system-misc.
Preparing to unpack .../qemu-system-misc_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system-misc (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-system.
Preparing to unpack .../qemu-system_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-system (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-user.
Preparing to unpack .../qemu-user_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-user (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu-utils.
Preparing to unpack .../qemu-utils_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu-utils (1:2.5+dfsg-5ubuntu10.24) ...
Selecting previously unselected package qemu.
Preparing to unpack .../qemu_1%3a2.5+dfsg-5ubuntu10.24_arm64.deb ...
Unpacking qemu (1:2.5+dfsg-5ubuntu10.24) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
Processing triggers for man-db (2.7.5-1) ...
Processing triggers for systemd (229-4ubuntu21.2) ...
Processing triggers for ureadahead (0.100.0-19) ...
Setting up libiscsi2:arm64 (1.12.0-2) ...
Setting up libboost-random1.58.0:arm64 (1.58.0+dfsg-5ubuntu3.1) ...
Setting up libboost-thread1.58.0:arm64 (1.58.0+dfsg-5ubuntu3.1) ...
Setting up libnspr4:arm64 (2:4.13.1-0ubuntu0.16.04.1) ...
Setting up acl (2.2.52-3) ...
Setting up ipxe-qemu (1.0.0+git-20150424.a25a16d-1ubuntu1.2) ...
Setting up libaio1:arm64 (0.3.110-2) ...
Setting up libusbredirparser1:arm64 (0.7.1-1) ...
Setting up libbrlapi0.6:arm64 (5.3.1-2ubuntu2.1) ...
Setting up libfdt1:arm64 (1.4.0+dfsg-2) ...
Setting up qemu-slof (20151103+dfsg-1ubuntu1.1) ...
Setting up seabios (1.8.2-1ubuntu1) ...
Setting up qemu-user (1:2.5+dfsg-5ubuntu10.24) ...
Setting up libnss3-nssdb (2:3.28.4-0ubuntu0.16.04.3) ...
Setting up libnss3:arm64 (2:3.28.4-0ubuntu0.16.04.3) ...
Setting up librados2 (10.2.9-0ubuntu0.16.04.1) ...
Setting up librbd1 (10.2.9-0ubuntu0.16.04.1) ...
Setting up qemu-block-extra:arm64 (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-common (1:2.5+dfsg-5ubuntu10.24) ...
Setting up libcacard0:arm64 (1:2.5.0-2) ...
Setting up qemu-system-arm (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-mips (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-ppc (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-sparc (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-x86 (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system-misc (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-system (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu-utils (1:2.5+dfsg-5ubuntu10.24) ...
Setting up qemu (1:2.5+dfsg-5ubuntu10.24) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
Processing triggers for systemd (229-4ubuntu21.2) ...
Processing triggers for ureadahead (0.100.0-19) ...
#+END_SRC

è‡³äºä¸ºä»€ä¹ˆä¸å®‰è£… =qemu-kvm= åŠ é€Ÿå™¨ï¼Œæ˜¯å› ä¸ºæˆ‘çš„CPUæ ¹æœ¬ä¸æ”¯æŒè™šæ‹ŸåŒ–å•Š
#+BEGIN_SRC shell
  grep Features /proc/cpuinfo |uniq
#+END_SRC

#+RESULTS:
#+BEGIN_SRC org
Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32 cpuid
#+END_SRC

è‹¥ä½ çš„CPUæ”¯æŒè™šæ‹ŸåŒ–ï¼Œåˆ™å¯ä»¥å®‰è£… =qemu-kvm= å†é€šè¿‡ =-enable-kvm= é€‰é¡¹è®©QEMUè¿è¡Œåœ¨KVMæ¨¡å¼ä¸­ï¼Œè¿™æ ·èƒ½å¤Ÿæå‡è™šæ‹Ÿæœºçš„é€Ÿåº¦ã€‚

* åˆ›å»ºç¡¬ç›˜é•œåƒ
ç¡¬ç›˜é•œåƒæ˜¯ä¸€ä¸ªæ–‡ä»¶,ç”¨æ¥å­˜å‚¨è™šæ‹Ÿæœºç¡¬ç›˜ä¸Šçš„å†…å®¹ã€‚

QEMUæœ‰ä¸¤ç§ç¡¬ç›˜é•œåƒ:ä¸€ç§æ˜¯ rawé•œåƒ(é»˜è®¤å€¼), å®ƒå’Œå®¢æˆ·æœºå™¨ä¸Šçœ‹åˆ°çš„å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¸»æœºä¸Šå ç”¨çš„ç©ºé—´å®¢æˆ·æœºä¸Šçš„å¤§å°ä¸€æ ·ã€‚è¿™ä¸ªæ–¹å¼ I/O æ•ˆç‡æœ€é«˜ï¼Œä½†æ˜¯å› ä¸ºå®¢æˆ·æœºå™¨ä¸Šæ²¡ä½¿ç”¨çš„ç©ºé—´ä¹Ÿè¢«å ç”¨ï¼Œæ‰€ä»¥æœ‰ç‚¹æµªè´¹ç©ºé—´ã€‚

å¦å¤–ä¸€ç§æ–¹å¼æ˜¯qcow2 æ ¼å¼ï¼Œä»…å½“å®¢æˆ·ç³»ç»Ÿå®é™…å†™å…¥å†…å®¹çš„æ—¶å€™ï¼Œæ‰ä¼šåˆ†é…é•œåƒç©ºé—´ã€‚å¯¹å®¢æˆ·æœºå™¨æ¥è¯´ï¼Œç¡¬ç›˜å¤§å°æ˜¯å®Œæ•´å¤§å°ï¼Œä½†æ˜¯åœ¨ä¸»æœºç³»ç»Ÿä¸Šå®é™…ä»…å ç”¨å’Œå¾ˆå°çš„ç©ºé—´ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼ä¼šå½±å“æ•ˆç‡.

QEMU ä¸­ä½¿ç”¨ qemu-imgå‘½ä»¤æ¥åˆ›å»ºç¡¬ç›˜é•œåƒ

#+BEGIN_SRC shell
  qemu-img create -f qcow2 dos.img 300M
#+END_SRC

#+RESULTS:
#+BEGIN_SRC org
Formatting 'dos.img', fmt=qcow2 size=314572800 encryption=off cluster_size=65536 lazy_refcounts=off refcount_bits=16
#+END_SRC

è¿™å°±åˆ›å»ºäº†ä¸€ä¸ª300Mçš„è™šæ‹Ÿç¡¬ç›˜ã€‚300MæŒ‰ç°åœ¨çš„æ ‡å‡†æ¥å®‰å¾ˆå°ï¼Œä½†æ˜¯å¯¹äºDOSæ¥è¯´å·²ç»æ˜¯å¾ˆå¤§çš„ç¡¬ç›˜ç©ºé—´äº†ã€‚

æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ =dos.img= å®é™…å ç”¨çš„ç©ºé—´
#+BEGIN_SRC shell
  ls -lh dos.img
#+END_SRC

#+RESULTS:
#+BEGIN_SRC org
-rw-r--r-- 1 lujun9972 lujun9972 193K Mar 30 22:40 dos.img
#+END_SRC

ä½ ä¼šå‘ç°ï¼Œå®é™…ä¸Šåªå ç”¨äº† =193K= å¤§å°è€Œå·²ã€‚

* å¯åŠ¨è™šæ‹Ÿæœºå®‰è£…FreeDOS
è·ŸVirtuaBoxï¼ŒVMWareç­‰è™šæ‹Ÿè½¯ä»¶ä¸åŒï¼ŒQEMUæ²¡æœ‰æä¾›ä¸€ä¸ªå›¾å½¢åŒ–çš„ç®¡ç†ç•Œé¢æ¥åˆ›å»ºè™šæ‹Ÿæœºï¼Œä½ éœ€è¦é€šè¿‡å‘½ä»¤æ¥æ„å»ºå‡ºè™šæ‹Ÿæœºçš„æ¯ä¸ªç»„å»ºã€‚

QEMUä½¿ç”¨ =qemu-system-*= ç¨‹åºæ¥å¯åŠ¨è™šæ‹Ÿæœºï¼Œè¿™é‡Œçš„ =*= æŒ‡å®šäº†è™šæ‹Ÿæœºçš„æ¶æ„ã€‚

#+BEGIN_SRC shell
  qemu-system-i386 -m 16 -k en-us -rtc base=localtime -soundhw sb16,adlib,pcspk -device cirrus-vga -hda dos.img -cdrom FD12CD.iso -boot order=d
#+END_SRC

è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼š

+ qemu-system-i386 :: è¯´æ˜è™šæ‹Ÿæœºçš„æ¶æ„ä¸ºi386
+ -m 16 :: è¡¨ç¤ºè™šæ‹Ÿæœºæœ‰16Mçš„å†…å­˜ï¼Œè¿™å¯¹DOSæ¥è¯´å·²ç»è¶³å¤Ÿäº†
+ -k en-us :: æŒ‡å®šé”®ç›˜å¸ƒå±€ï¼Œå¦‚æœçœç•¥çš„è¯åˆ™ä½¿ç”¨ä½ å®é™…é”®ç›˜çš„å¸ƒå±€
+ -rtc base=localtime :: è®¾ç½®è™šæ‹Ÿæœºçš„real time clockï¼ˆRTCï¼‰ä¸æˆ‘ä»¬çš„æœ¬åœ°æ—¶é—´ç›¸åŒ¹é…
+ -soundhw sb16,adlib,pcspk :: è®¾ç½®å£°å¡ä¸ºSoundBlaster16,å¹¶ä¸”æ”¯æŒAdLib Musicï¼ŒåŒæ—¶æ¨¡æ‹Ÿå‡ºPCæ‰¬å£°å™¨ï¼Œä½¿ç”¨ =qemu-system-i386 --soundhw ?= å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨å£°å¡ã€‚
+ -device cirrus-vga :: æ¨¡æ‹Ÿæ˜¾å¡
+ -hda dos.img :: æŒ‡å®šdos.imgä¸ºç¬¬ä¸€å—ç¡¬ç›˜ï¼Œä¹Ÿå°±æ˜¯c:
+ -cdrom FD12CD.iso :: æŒ‡å®šFD12CD.isoæŒ‚è½½ä¸ºCD-ROMï¼Œä¹Ÿå°±æ˜¯d:
+ -boot order=d :: æŒ‡å®šä»dç›˜å¯åŠ¨
                   
ç„¶åæˆ‘ä»¬è·Ÿç€æŒ‡ä»¤ä¸€æ­¥ä¸€æ­¥çš„å®‰è£…FreeDOSå°±è¡Œäº†

[[file:./images/screenshot-18.png]]

[[file:./images/screenshot-19.png]]

[[file:./images/screenshot-20.png]]

[[file:./images/screenshot-21.png]]

[[file:./images/screenshot-22.png]]

[[file:./images/screenshot-23.png]]

[[file:./images/screenshot-24.png]]

[[file:./images/screenshot-25.png]]

ä¸è¿‡ï¼Œç”±äºmicroSDå¡IOå¾ˆæ…¢ï¼Œå› æ­¤å®‰è£…è¿‡ç¨‹ä¼šèŠ±å¾ˆé•¿çš„æ—¶é—´ã€‚

å®‰è£…å¥½åï¼Œé€šè¿‡ä¿®æ”¹ä¸Šé¢å‘½ä»¤ä¸­çš„ ~-boot order=d~ ä¸º ~-boot order=c~ æ¥æŒ‡å®šä»cç›˜å¯åŠ¨ï¼Œå°±èƒ½è¿›å…¥DOSäº†

#+BEGIN_SRC shell
  qemu-system-i386 -m 16 -k en-us -rtc base=localtime -soundhw sb16,adlib,pcspk -device cirrus-vga -hda dos.img -cdrom FD12CD.iso -boot order=c
#+END_SRC

[[file:./images/screenshot-26.png]]

[[file:./images/screenshot-27.png]]

FeeDOSåŒ…å«å¾ˆå¤šæ¸¸æˆå’Œåº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ =FDIMPLES= æ¥å®‰è£…

[[file:./images/screenshot-28.png]]

* ä¸å¤–éƒ¨ç³»ç»Ÿäº¤æ¢æ–‡ä»¶
ä½¿ç”¨ =-drive= é€‰é¡¹å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŠŠå¤–éƒ¨ç³»ç»Ÿçš„ä¸€ä¸ªç›®å½•æŒ‚è½½æˆè™šæ‹Ÿæœºä¸­çš„ä¸€å—ç£ç›˜ã€‚

æ¯”å¦‚é€šè¿‡åœ¨å¯åŠ¨å‘½ä»¤ååŠ å…¥ =-drive file=fat:rw:dosfiles= å°±èƒ½æŠŠ =dosfiles= ç›®å½•æŒ‚è½½æˆè™šæ‹Ÿæœºä¸­çš„ä¸€å—FATæ ¼å¼çš„ç£ç›˜ã€‚

#+BEGIN_SRC shell
  qemu-system-i386 -m 16 -k en-us -rtc base=localtime -soundhw sb16,adlib,pcspk -device cirrus-vga -hda dos.img -drive file=fat:rw:dosfiles/ -boot order=c
#+END_SRC
* ä¸ºä»€ä¹ˆä¸ç”¨VirtualBoxï¼Ÿ
å› ä¸ºArmbianä¸Šæ ¹æœ¬å°±æ²¡æœ‰VirtualBoxå•Šï½ï½

* ä¸ºä»€ä¹ˆä¸ç”¨DOSBOXï¼Ÿ
å¦‚æœä½ åªæ˜¯æƒ³ç©DOSæ¸¸æˆçš„è¯ï¼Œé‚£ä¹ˆDOSBOXä¼šæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½†æ˜¯å®ƒå¯¹DOSåº”ç”¨ç¨‹åºçš„æ”¯æŒå°±æ²¡é‚£ä¹ˆå¥½äº†ã€‚

è€Œä¸”ç›¸å¯¹æ¥è¯´åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…å®Œæ•´çš„DOSç¯å¢ƒèƒ½æä¾›æ¯”DOSBOXå¤šå¾—å¤šçš„è‡ªç”±åº¦ã€‚
